{"ast":null,"code":"/*!\n * PathEditor 3.13.0\n * https://gsap.com\n *\n * Copyright 2008-2025, GreenSock. All rights reserved.\n * Subject to the terms at https://gsap.com/standard-license\n * @author: Jack Doyle, jack@greensock.com\n*/\n\n/* eslint-disable */\nimport { stringToRawPath, rawPathToString, bezierToPoints, simplifyPoints, pointsToSegment, subdivideSegment, getClosestData, copyRawPath, transformRawPath } from \"./paths.js\";\nimport { getGlobalMatrix, Matrix2D } from \"./matrix.js\";\nvar _numbersExp = /(?:(-)?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[0-9]/ig,\n  _doc,\n  _supportsPointer,\n  _win,\n  _body,\n  gsap,\n  _context,\n  _selectionColor = \"#4e7fff\",\n  _minimumMovement = 1,\n  _DEG2RAD = Math.PI / 180,\n  _getTime = Date.now || function () {\n    return new Date().getTime();\n  },\n  _lastInteraction = 0,\n  _isPressed = 0,\n  _emptyFunc = function _emptyFunc() {\n    return false;\n  },\n  _interacted = function _interacted() {\n    return _lastInteraction = _getTime();\n  },\n  _CTRL,\n  _ALT,\n  _SHIFT,\n  _CMD,\n  _recentlyAddedAnchor,\n  _editingAxis = {},\n  //stores the x/y of the most recently-selected anchor point's x and y axis. We tap into this for snapping horizontally and vertically.\n  _history = [],\n  _point = {},\n  //reuse to minimize memory and maximize performance (mostly for snapping)\n  _temp = [],\n  //reuse this in places like getNormalizedSVG() to conserve memory\n  _comma = \",\",\n  _selectedPaths = [],\n  _preventDefault = function _preventDefault(event) {\n    if (event.preventDefault) {\n      event.preventDefault();\n      if (event.preventManipulation) {\n        event.preventManipulation(); //for some Microsoft browsers\n      }\n    }\n  },\n  _createElement = function _createElement(type) {\n    return _doc.createElementNS ? _doc.createElementNS(\"http://www.w3.org/1999/xhtml\", type) : _doc.createElement(type);\n  },\n  _createSVG = function _createSVG(type, container, attributes) {\n    var element = _doc.createElementNS(\"http://www.w3.org/2000/svg\", type),\n      reg = /([a-z])([A-Z])/g,\n      p;\n    attributes = attributes || {};\n    attributes[\"class\"] = attributes[\"class\"] || \"path-editor\";\n    for (p in attributes) {\n      if (element.style[p] !== undefined) {\n        element.style[p] = attributes[p];\n      } else {\n        element.setAttributeNS(null, p.replace(reg, \"$1-$2\").toLowerCase(), attributes[p]);\n      }\n    }\n    container.appendChild(element);\n    return element;\n  },\n  _identityMatrixObject = {\n    matrix: new Matrix2D()\n  },\n  _getConsolidatedMatrix = function _getConsolidatedMatrix(target) {\n    return (target.transform && target.transform.baseVal.consolidate() || _identityMatrixObject).matrix;\n  },\n  _getConcatenatedTransforms = function _getConcatenatedTransforms(target) {\n    var m = _getConsolidatedMatrix(target),\n      owner = target.ownerSVGElement;\n    while ((target = target.parentNode) && target.ownerSVGElement === owner) {\n      m.multiply(_getConsolidatedMatrix(target));\n    }\n    return \"matrix(\" + m.a + \",\" + m.b + \",\" + m.c + \",\" + m.d + \",\" + m.e + \",\" + m.f + \")\";\n  },\n  _addHistory = function _addHistory(pathEditor) {\n    var selectedIndexes = [],\n      a = pathEditor._selectedAnchors,\n      i;\n    for (i = 0; i < a.length; i++) {\n      selectedIndexes[i] = a[i].i;\n    }\n    _history.unshift({\n      path: pathEditor,\n      d: pathEditor.path.getAttribute(\"d\"),\n      transform: pathEditor.path.getAttribute(\"transform\") || \"\",\n      selectedIndexes: selectedIndexes\n    });\n    if (_history.length > 30) {\n      _history.length = 30;\n    }\n  },\n  _round = function _round(value) {\n    return ~~(value * 1000 + (value < 0 ? -.5 : .5)) / 1000;\n  },\n  _getSquarePathData = function _getSquarePathData(size) {\n    size = _round(size);\n    return [\"M-\" + size, -size, size, -size, size, size, -size, size + \"z\"].join(_comma);\n  },\n  _getCirclePathData = function _getCirclePathData(size) {\n    var circ = 0.552284749831,\n      rcirc = _round(size * circ);\n    size = _round(size);\n    return \"M\" + size + \",0C\" + [size, rcirc, rcirc, size, 0, size, -rcirc, size, -size, rcirc, -size, 0, -size, -rcirc, -rcirc, -size, 0, -size, rcirc, -size, size, -rcirc, size, 0].join(_comma) + \"z\";\n  },\n  _checkDeselect = function _checkDeselect(e) {\n    if (!e.target._gsSelection && !_isPressed && _getTime() - _lastInteraction > 100) {\n      var i = _selectedPaths.length;\n      while (--i > -1) {\n        _selectedPaths[i].deselect();\n      }\n      _selectedPaths.length = 0;\n    }\n  },\n  _tempDiv,\n  _touchEventLookup,\n  _isMultiTouching = 0,\n  _addListener = function _addListener(element, type, func, capture) {\n    if (element.addEventListener) {\n      var touchType = _touchEventLookup[type];\n      capture = capture || {\n        passive: false\n      };\n      element.addEventListener(touchType || type, func, capture);\n      if (touchType && type !== touchType && touchType.substr(0, 7) !== \"pointer\") {\n        //some browsers actually support both, so must we. But pointer events cover all.\n        element.addEventListener(type, func, capture);\n      }\n    } else if (element.attachEvent) {\n      element.attachEvent(\"on\" + type, func);\n    }\n  },\n  _removeListener = function _removeListener(element, type, func) {\n    if (element.removeEventListener) {\n      var touchType = _touchEventLookup[type];\n      element.removeEventListener(touchType || type, func);\n      if (touchType && type !== touchType && touchType.substr(0, 7) !== \"pointer\") {\n        element.removeEventListener(type, func);\n      }\n    } else if (element.detachEvent) {\n      element.detachEvent(\"on\" + type, func);\n    }\n  },\n  _hasTouchID = function _hasTouchID(list, ID) {\n    var i = list.length;\n    while (--i > -1) {\n      if (list[i].identifier === ID) {\n        return true;\n      }\n    }\n    return false;\n  },\n  _onMultiTouchDocumentEnd = function _onMultiTouchDocumentEnd(e) {\n    _isMultiTouching = e.touches && _dragCount < e.touches.length;\n    _removeListener(e.target, \"touchend\", _onMultiTouchDocumentEnd);\n  },\n  _onMultiTouchDocument = function _onMultiTouchDocument(e) {\n    _isMultiTouching = e.touches && _dragCount < e.touches.length;\n    _addListener(e.target, \"touchend\", _onMultiTouchDocumentEnd);\n  },\n  _bind = function _bind(func, scope) {\n    return function (e) {\n      return func.call(scope, e);\n    };\n  },\n  _callback = function _callback(type, self, param) {\n    var callback = self.vars[type];\n    if (callback) {\n      callback.call(self.vars.callbackScope || self, param || self);\n    }\n    return self;\n  },\n  _copyElement,\n  _resetSelection = function _resetSelection() {\n    _copyElement.style.display = \"block\";\n    _copyElement.select();\n    _copyElement.style.display = \"none\";\n  },\n  _coreInitted,\n  _initCore = function _initCore(core) {\n    _doc = document;\n    _win = window;\n    _body = _doc.body;\n    gsap = gsap || core || _win.gsap || console.warn(\"Please gsap.registerPlugin(PathEditor)\");\n    _context = gsap && gsap.core.context || function () {};\n    _tempDiv = _createElement(\"div\");\n    _copyElement = _createElement(\"textarea\");\n    _copyElement.style.display = \"none\";\n    _body && _body.appendChild(_copyElement);\n    _touchEventLookup = function (types) {\n      //we create an object that makes it easy to translate touch event types into their \"pointer\" counterparts if we're in a browser that uses those instead. Like IE10 uses \"MSPointerDown\" instead of \"touchstart\", for example.\n      var standard = types.split(\",\"),\n        converted = (_tempDiv.onpointerdown !== undefined ? \"pointerdown,pointermove,pointerup,pointercancel\" : _tempDiv.onmspointerdown !== undefined ? \"MSPointerDown,MSPointerMove,MSPointerUp,MSPointerCancel\" : types).split(\",\"),\n        obj = {},\n        i = 4;\n      while (--i > -1) {\n        obj[standard[i]] = converted[i];\n        obj[converted[i]] = standard[i];\n      }\n      return obj;\n    }(\"touchstart,touchmove,touchend,touchcancel\");\n    SVGElement.prototype.getTransformToElement = SVGElement.prototype.getTransformToElement || function (e) {\n      //adds Chrome support\n      return e.getScreenCTM().inverse().multiply(this.getScreenCTM());\n    };\n    _doc.addEventListener(\"keydown\", function (e) {\n      var key = e.keyCode || e.which,\n        keyString = e.key || key,\n        i,\n        state,\n        a,\n        path;\n      if (keyString === \"Shift\" || key === 16) {\n        _SHIFT = true;\n      } else if (keyString === \"Control\" || key === 17) {\n        _CTRL = true;\n      } else if (keyString === \"Meta\" || key === 91) {\n        _CMD = true;\n      } else if (keyString === \"Alt\" || key === 18) {\n        _ALT = true;\n        i = _selectedPaths.length;\n        while (--i > -1) {\n          _selectedPaths[i]._onPressAlt();\n        }\n      } else if ((keyString === \"z\" || key === 90) && (_CTRL || _CMD) && _history.length > 1) {\n        //UNDO\n        _history.shift();\n        state = _history[0];\n        if (state) {\n          path = state.path;\n          path.path.setAttribute(\"d\", state.d);\n          path.path.setAttribute(\"transform\", state.transform);\n          path.init();\n          a = path._anchors;\n          for (i = 0; i < a.length; i++) {\n            if (state.selectedIndexes.indexOf(a[i].i) !== -1) {\n              path._selectedAnchors.push(a[i]);\n            }\n          }\n          path._updateAnchors();\n          path.update();\n          if (path.vars.onUndo) {\n            path.vars.onUndo.call(path);\n          }\n        }\n      } else if (keyString === \"Delete\" || keyString === \"Backspace\" || key === 8 || key === 46 || key === 63272 || key === \"d\" && (_CTRL || _CMD)) {\n        //DELETE\n        i = _selectedPaths.length;\n        while (--i > -1) {\n          _selectedPaths[i]._deleteSelectedAnchors();\n        }\n      } else if ((keyString === \"a\" || key === 65) && (_CMD || _CTRL)) {\n        //SELECT ALL\n        i = _selectedPaths.length;\n        while (--i > -1) {\n          _selectedPaths[i].select(true);\n        }\n      }\n    }, true);\n    _doc.addEventListener(\"keyup\", function (e) {\n      var key = e.key || e.keyCode || e.which;\n      if (key === \"Shift\" || key === 16) {\n        _SHIFT = false;\n      } else if (key === \"Control\" || key === 17) {\n        _CTRL = false;\n      } else if (key === \"Meta\" || key === 91) {\n        _CMD = false;\n      } else if (key === \"Alt\" || key === 18) {\n        _ALT = false;\n        var i = _selectedPaths.length;\n        while (--i > -1) {\n          _selectedPaths[i]._onReleaseAlt();\n        }\n      }\n    }, true);\n    _supportsPointer = !!_win.PointerEvent;\n    _addListener(_doc, \"mouseup\", _checkDeselect);\n    _addListener(_doc, \"touchend\", _checkDeselect);\n    _addListener(_doc, \"touchcancel\", _emptyFunc); //some older Android devices intermittently stop dispatching \"touchmove\" events if we don't listen for \"touchcancel\" on the document. Very strange indeed.\n\n    _addListener(_win, \"touchmove\", _emptyFunc); //works around Safari bugs that still allow the page to scroll even when we preventDefault() on the touchmove event.\n\n    _body && _body.addEventListener(\"touchstart\", _emptyFunc); //works around Safari bug: https://gsap.com/forums/topic/21450-draggable-in-iframe-on-mobile-is-buggy/\n\n    _coreInitted = 1;\n  },\n  _onPress = function _onPress(e) {\n    var self = this,\n      ctm = getGlobalMatrix(self.target.parentNode, true),\n      //previously used self.target.parentNode.getScreenCTM().inverse() but there's a major bug in Firefox that prevents it from working properly when there's an ancestor with a transform applied, so we bootstrapped our own solution that seems to work great across all browsers.\n      touchEventTarget,\n      temp;\n    this._matrix = this.target.transform.baseVal.getItem(0).matrix;\n    this._ctm = ctm;\n    if (_touchEventLookup[e.type]) {\n      //note: on iOS, BOTH touchmove and mousemove are dispatched, but the mousemove has pageY and pageX of 0 which would mess up the calculations and needlessly hurt performance.\n      touchEventTarget = e.type.indexOf(\"touch\") !== -1 ? e.currentTarget || e.target : _doc; //pointer-based touches (for Microsoft browsers) don't remain locked to the original target like other browsers, so we must use the document instead. The event type would be \"MSPointerDown\" or \"pointerdown\".\n\n      _addListener(touchEventTarget, \"touchend\", self._onRelease);\n      _addListener(touchEventTarget, \"touchmove\", self._onMove);\n      _addListener(touchEventTarget, \"touchcancel\", self._onRelease);\n      _addListener(_doc, \"touchstart\", _onMultiTouchDocument);\n      _addListener(_win, \"touchforcechange\", _preventDefault); //otherwise iOS will scroll when dragging.\n    } else {\n      touchEventTarget = null;\n      _addListener(_doc, \"mousemove\", self._onMove); //attach these to the document instead of the box itself so that if the user's mouse moves too quickly (and off of the box), things still work.\n    }\n    if (!_supportsPointer) {\n      _addListener(_doc, \"mouseup\", self._onRelease);\n    }\n    _preventDefault(e);\n    _resetSelection(); // when a PathEditor is in an iframe in an environment like codepen, this helps avoid situations where the DELETE key won't actually work because the parent frame is intercepting the event.\n\n    if (e.changedTouches) {\n      //touch events store the data slightly differently\n      e = self.touch = e.changedTouches[0];\n      self.touchID = e.identifier;\n    } else if (e.pointerId) {\n      self.touchID = e.pointerId; //for some Microsoft browsers\n    } else {\n      self.touch = self.touchID = null;\n    }\n    self._startPointerY = self.pointerY = e.pageY; //record the starting x and y so that we can calculate the movement from the original in _onMouseMove\n\n    self._startPointerX = self.pointerX = e.pageX;\n    self._startElementX = self._matrix.e;\n    self._startElementY = self._matrix.f;\n    if (this._ctm.a === 1 && this._ctm.b === 0 && this._ctm.c === 0 && this._ctm.d === 1) {\n      this._ctm = null;\n    } else {\n      temp = self._startPointerX * this._ctm.a + self._startPointerY * this._ctm.c + this._ctm.e;\n      self._startPointerY = self._startPointerX * this._ctm.b + self._startPointerY * this._ctm.d + this._ctm.f;\n      self._startPointerX = temp;\n    }\n    self.isPressed = _isPressed = true;\n    self.touchEventTarget = touchEventTarget;\n    if (self.vars.onPress) {\n      self.vars.onPress.call(self.vars.callbackScope || self, self.pointerEvent);\n    }\n  },\n  _onMove = function _onMove(e) {\n    var self = this,\n      originalEvent = e,\n      touches,\n      i;\n    if (!self._enabled || _isMultiTouching || !self.isPressed || !e) {\n      return;\n    }\n    self.pointerEvent = e;\n    touches = e.changedTouches;\n    if (touches) {\n      //touch events store the data slightly differently\n      e = touches[0];\n      if (e !== self.touch && e.identifier !== self.touchID) {\n        //Usually changedTouches[0] will be what we're looking for, but in case it's not, look through the rest of the array...(and Android browsers don't reuse the event like iOS)\n        i = touches.length;\n        while (--i > -1 && (e = touches[i]).identifier !== self.touchID) {}\n        if (i < 0) {\n          return;\n        }\n      }\n    } else if (e.pointerId && self.touchID && e.pointerId !== self.touchID) {\n      //for some Microsoft browsers, we must attach the listener to the doc rather than the trigger so that when the finger moves outside the bounds of the trigger, things still work. So if the event we're receiving has a pointerId that doesn't match the touchID, ignore it (for multi-touch)\n      return;\n    }\n    _preventDefault(originalEvent);\n    self.setPointerPosition(e.pageX, e.pageY);\n    if (self.vars.onDrag) {\n      self.vars.onDrag.call(self.vars.callbackScope || self, self.pointerEvent);\n    }\n  },\n  _onRelease = function _onRelease(e, force) {\n    var self = this;\n    if (!self._enabled || !self.isPressed || e && self.touchID != null && !force && (e.pointerId && e.pointerId !== self.touchID || e.changedTouches && !_hasTouchID(e.changedTouches, self.touchID))) {\n      //for some Microsoft browsers, we must attach the listener to the doc rather than the trigger so that when the finger moves outside the bounds of the trigger, things still work. So if the event we're receiving has a pointerId that doesn't match the touchID, ignore it (for multi-touch)\n      return;\n    }\n    _interacted();\n    self.isPressed = _isPressed = false; //TODO: if we want to accommodate multi-touch, we'd need to introduce a counter to track how many touches there are and only toggle this when they're all off.\n\n    var originalEvent = e,\n      wasDragging = self.isDragging,\n      touchEventTarget = self.touchEventTarget,\n      touches,\n      i;\n    if (touchEventTarget) {\n      _removeListener(touchEventTarget, \"touchend\", self._onRelease);\n      _removeListener(touchEventTarget, \"touchmove\", self._onMove);\n      _removeListener(touchEventTarget, \"touchcancel\", self._onRelease);\n      _removeListener(_doc, \"touchstart\", _onMultiTouchDocument);\n    } else {\n      _removeListener(_doc, \"mousemove\", self._onMove);\n    }\n    if (!_supportsPointer) {\n      _removeListener(_doc, \"mouseup\", self._onRelease);\n      if (e && e.target) {\n        _removeListener(e.target, \"mouseup\", self._onRelease);\n      }\n    }\n    if (wasDragging) {\n      self.isDragging = false;\n    } else if (self.vars.onClick) {\n      self.vars.onClick.call(self.vars.callbackScope || self, originalEvent);\n    }\n    if (e) {\n      touches = e.changedTouches;\n      if (touches) {\n        //touch events store the data slightly differently\n        e = touches[0];\n        if (e !== self.touch && e.identifier !== self.touchID) {\n          //Usually changedTouches[0] will be what we're looking for, but in case it's not, look through the rest of the array...(and Android browsers don't reuse the event like iOS)\n          i = touches.length;\n          while (--i > -1 && (e = touches[i]).identifier !== self.touchID) {}\n          if (i < 0) {\n            return;\n          }\n        }\n      }\n      self.pointerEvent = originalEvent;\n      self.pointerX = e.pageX;\n      self.pointerY = e.pageY;\n    }\n    if (originalEvent && !wasDragging && self.vars.onDragRelease) {\n      self.vars.onDragRelease.call(self, self.pointerEvent);\n    } else {\n      if (originalEvent) {\n        _preventDefault(originalEvent);\n      }\n      if (self.vars.onRelease) {\n        self.vars.onRelease.call(self.vars.callbackScope || self, self.pointerEvent);\n      }\n    }\n    if (wasDragging && self.vars.onDragEnd) {\n      self.vars.onDragEnd.call(self.vars.callbackScope || self, self.pointerEvent);\n    }\n    return true;\n  },\n  _createSegmentAnchors = function _createSegmentAnchors(rawPath, j, editor, vars) {\n    var segment = rawPath[j],\n      l = segment.length - (segment.closed ? 6 : 0),\n      a = [],\n      i;\n    for (i = 0; i < l; i += 6) {\n      a.push(new Anchor(editor, rawPath, j, i, vars));\n    }\n    segment.closed && (a[0].isClosedStart = true);\n    return a;\n  },\n  _getLength = function _getLength(segment, i, i2) {\n    //i is the starting index, and it'll return the length to the next x/y pair. So if you're looking for the length to handle1, you'd feed in the index of the handle control point x whereas if you're looking for the length to handle2, i would be the x of the anchor.\n    var x = segment[i2] - segment[i],\n      y = segment[i2 + 1] - segment[i + 1];\n    return Math.sqrt(x * x + y * y);\n  };\nvar DraggableSVG = /*#__PURE__*/function () {\n  function DraggableSVG(target, vars) {\n    this.target = typeof target === \"string\" ? _doc.querySelectorAll(target)[0] : target;\n    this.vars = vars || {};\n    this._onPress = _bind(_onPress, this);\n    this._onMove = _bind(_onMove, this);\n    this._onRelease = _bind(_onRelease, this);\n    this.target.setAttribute(\"transform\", (this.target.getAttribute(\"transform\") || \"\") + \" translate(0,0)\");\n    this._matrix = _getConsolidatedMatrix(this.target);\n    this.x = this._matrix.e;\n    this.y = this._matrix.f;\n    this.snap = vars.snap;\n    if (!isNaN(vars.maxX) || !isNaN(vars.minX)) {\n      this._bounds = 1;\n      this.maxX = +vars.maxX;\n      this.minX = +vars.minX;\n    } else {\n      this._bounds = 0;\n    }\n    this.enabled(true);\n  }\n  var _proto = DraggableSVG.prototype;\n  _proto.setPointerPosition = function setPointerPosition(pointerX, pointerY) {\n    var rnd = 1000,\n      xChange,\n      yChange,\n      x,\n      y,\n      temp;\n    this.pointerX = pointerX;\n    this.pointerY = pointerY;\n    if (this._ctm) {\n      temp = pointerX * this._ctm.a + pointerY * this._ctm.c + this._ctm.e;\n      pointerY = pointerX * this._ctm.b + pointerY * this._ctm.d + this._ctm.f;\n      pointerX = temp;\n    }\n    yChange = pointerY - this._startPointerY;\n    xChange = pointerX - this._startPointerX;\n    if (yChange < _minimumMovement && yChange > -_minimumMovement) {\n      yChange = 0;\n    }\n    if (xChange < _minimumMovement && xChange > -_minimumMovement) {\n      xChange = 0;\n    }\n    x = ((this._startElementX + xChange) * rnd | 0) / rnd;\n    y = ((this._startElementY + yChange) * rnd | 0) / rnd;\n    if (this.snap && !_SHIFT) {\n      _point.x = x;\n      _point.y = y;\n      this.snap.call(this, _point);\n      x = _point.x;\n      y = _point.y;\n    }\n    if (this.x !== x || this.y !== y) {\n      this._matrix.f = this.y = y;\n      this._matrix.e = this.x = x;\n      if (!this.isDragging && this.isPressed) {\n        this.isDragging = true;\n        _callback(\"onDragStart\", this, this.pointerEvent);\n      }\n    }\n  };\n  _proto.enabled = function enabled(_enabled) {\n    if (!arguments.length) {\n      return this._enabled;\n    }\n    var dragging;\n    this._enabled = _enabled;\n    if (_enabled) {\n      if (!_supportsPointer) {\n        _addListener(this.target, \"mousedown\", this._onPress);\n      }\n      _addListener(this.target, \"touchstart\", this._onPress);\n      _addListener(this.target, \"click\", this._onClick, true); //note: used to pass true for capture but it prevented click-to-play-video functionality in Firefox.\n    } else {\n      dragging = this.isDragging;\n      _removeListener(this.target, \"mousedown\", this._onPress);\n      _removeListener(this.target, \"touchstart\", this._onPress);\n      _removeListener(_win, \"touchforcechange\", _preventDefault);\n      _removeListener(this.target, \"click\", this._onClick);\n      if (this.touchEventTarget) {\n        _removeListener(this.touchEventTarget, \"touchcancel\", this._onRelease);\n        _removeListener(this.touchEventTarget, \"touchend\", this._onRelease);\n        _removeListener(this.touchEventTarget, \"touchmove\", this._onMove);\n      }\n      _removeListener(_doc, \"mouseup\", this._onRelease);\n      _removeListener(_doc, \"mousemove\", this._onMove);\n      this.isDragging = this.isPressed = false;\n      if (dragging) {\n        _callback(\"onDragEnd\", this, this.pointerEvent);\n      }\n    }\n    return this;\n  };\n  _proto.endDrag = function endDrag(e) {\n    this._onRelease(e);\n  };\n  return DraggableSVG;\n}();\nvar Anchor = /*#__PURE__*/function () {\n  function Anchor(editor, rawPath, j, i, vars) {\n    this.editor = editor;\n    this.element = _createSVG(\"path\", editor._selection, {\n      fill: _selectionColor,\n      stroke: _selectionColor,\n      strokeWidth: 2,\n      vectorEffect: \"non-scaling-stroke\"\n    });\n    this.update(rawPath, j, i);\n    this.element._gsSelection = true;\n    this.vars = vars || {};\n    this._draggable = new DraggableSVG(this.element, {\n      callbackScope: this,\n      onDrag: this.onDrag,\n      snap: this.vars.snap,\n      onPress: this.onPress,\n      onRelease: this.onRelease,\n      onClick: this.onClick,\n      onDragEnd: this.onDragEnd\n    });\n  }\n  var _proto2 = Anchor.prototype;\n  _proto2.onPress = function onPress() {\n    _callback(\"onPress\", this);\n  };\n  _proto2.onClick = function onClick() {\n    _callback(\"onClick\", this);\n  };\n  _proto2.onDrag = function onDrag() {\n    var s = this.segment;\n    this.vars.onDrag.call(this.vars.callbackScope || this, this, this._draggable.x - s[this.i], this._draggable.y - s[this.i + 1]);\n  };\n  _proto2.onDragEnd = function onDragEnd() {\n    _callback(\"onDragEnd\", this);\n  };\n  _proto2.onRelease = function onRelease() {\n    _callback(\"onRelease\", this);\n  };\n  _proto2.update = function update(rawPath, j, i) {\n    if (rawPath) {\n      this.rawPath = rawPath;\n    }\n    if (arguments.length <= 1) {\n      j = this.j;\n      i = this.i;\n    } else {\n      this.j = j;\n      this.i = i;\n    }\n    var prevSmooth = this.smooth,\n      segment = this.rawPath[j],\n      pi = i === 0 && segment.closed ? segment.length - 4 : i - 2;\n    this.segment = segment;\n    this.smooth = i > 0 && i < segment.length - 2 && Math.abs(Math.atan2(segment[i + 1] - segment[pi + 1], segment[i] - segment[pi]) - Math.atan2(segment[i + 3] - segment[i + 1], segment[i + 2] - segment[i])) < 0.09 ? 2 : 0; //0: corner, 1: smooth but not mirrored, 2: smooth and mirrored.\n\n    if (this.smooth !== prevSmooth) {\n      this.element.setAttribute(\"d\", this.smooth ? this.editor._circleHandle : this.editor._squareHandle);\n    }\n    this.element.setAttribute(\"transform\", \"translate(\" + segment[i] + \",\" + segment[i + 1] + \")\");\n  };\n  return Anchor;\n}();\nexport var PathEditor = /*#__PURE__*/function () {\n  function PathEditor(target, vars) {\n    vars = vars || {};\n    _coreInitted || _initCore();\n    this.vars = vars;\n    this.path = typeof target === \"string\" ? _doc.querySelectorAll(target)[0] : target;\n    this._g = _createSVG(\"g\", this.path.ownerSVGElement, {\n      \"class\": \"path-editor-g path-editor\"\n    });\n    this._selectionHittest = _createSVG(\"path\", this._g, {\n      stroke: \"transparent\",\n      strokeWidth: 16,\n      fill: \"none\",\n      vectorEffect: \"non-scaling-stroke\"\n    });\n    this._selection = vars._selection || _createSVG(\"g\", this._g, {\n      \"class\": \"path-editor-selection path-editor\"\n    });\n    this._selectionPath = _createSVG(\"path\", this._selection, {\n      stroke: _selectionColor,\n      strokeWidth: 2,\n      fill: \"none\",\n      vectorEffect: \"non-scaling-stroke\"\n    });\n    this._selectedAnchors = [];\n    this._line1 = _createSVG(\"polyline\", this._selection, {\n      stroke: _selectionColor,\n      strokeWidth: 2,\n      vectorEffect: \"non-scaling-stroke\"\n    });\n    this._line2 = _createSVG(\"polyline\", this._selection, {\n      stroke: _selectionColor,\n      strokeWidth: 2,\n      vectorEffect: \"non-scaling-stroke\"\n    });\n    this._line1.style.pointerEvents = this._line2.style.pointerEvents = this._selectionPath.style.pointerEvents = \"none\";\n    this._enabled = true;\n    var ctm = this.path.parentNode.getScreenCTM().inverse(),\n      size = (ctm.a + ctm.d) / 2 * (vars.handleSize || 5);\n    this._squareHandle = _getSquarePathData(size);\n    this._circleHandle = _getCirclePathData(size * 1.15);\n    this._handle1 = _createSVG(\"path\", this._selection, {\n      d: this._squareHandle,\n      fill: _selectionColor,\n      stroke: \"transparent\",\n      strokeWidth: 6\n    });\n    this._handle2 = _createSVG(\"path\", this._selection, {\n      d: this._squareHandle,\n      fill: _selectionColor,\n      stroke: \"transparent\",\n      strokeWidth: 6\n    });\n    this._handle1._draggable = new DraggableSVG(this._handle1, {\n      onDrag: this._onDragHandle1,\n      callbackScope: this,\n      onPress: this._onPressHandle1,\n      onRelease: this._onReleaseHandle,\n      onClick: this._onClickHandle1,\n      snap: vars.handleSnap\n    });\n    this._handle2._draggable = new DraggableSVG(this._handle2, {\n      onDrag: this._onDragHandle2,\n      callbackScope: this,\n      onPress: this._onPressHandle2,\n      onRelease: this._onReleaseHandle,\n      onClick: this._onClickHandle2,\n      snap: vars.handleSnap\n    });\n    this._handle1.style.visibility = this._handle2.style.visibility = \"hidden\";\n    var selectionItems = [this._handle1, this._handle2, this._line1, this._line2, this._selection, this._selectionPath, this._selectionHittest],\n      i = selectionItems.length;\n    while (--i > -1) {\n      selectionItems[i]._gsSelection = true; //just a flag we can check in the _checkDeselect() method to detect clicks on things that are selection-related.\n    }\n    if (vars.draggable !== false) {\n      this._draggable = new DraggableSVG(this._selectionHittest, {\n        callbackScope: this,\n        onPress: this.select,\n        onRelease: this._onRelease,\n        onDrag: this._onDragPath,\n        onDragEnd: this._saveState,\n        maxX: this.vars.maxX,\n        minX: this.vars.minX\n      });\n    }\n    this.init();\n    this._selection.style.visibility = vars.selected === false ? \"hidden\" : \"visible\";\n    if (vars.selected !== false) {\n      this.path._gsSelection = true;\n      _selectedPaths.push(this);\n    }\n    this._saveState();\n    if (!_supportsPointer) {\n      _addListener(this._selectionHittest, \"mousedown\", _bind(this._onClickSelectionPath, this));\n      _addListener(this._selectionHittest, \"mouseup\", _bind(this._onRelease, this));\n    }\n    _addListener(this._selectionHittest, \"touchstart\", _bind(this._onClickSelectionPath, this));\n    _addListener(this._selectionHittest, \"touchend\", _bind(this._onRelease, this));\n    _context(this);\n  }\n  var _proto3 = PathEditor.prototype;\n  _proto3._onRelease = function _onRelease(e) {\n    var anchor = this._editingAnchor;\n    if (anchor) {\n      _editingAxis.x = anchor.segment[anchor.i];\n      _editingAxis.y = anchor.segment[anchor.i + 1];\n    }\n    _removeListener(_win, \"touchforcechange\", _preventDefault); //otherwise iOS will scroll when dragging.\n\n    _callback(\"onRelease\", this, e);\n  };\n  _proto3.init = function init() {\n    var pathData = this.path.getAttribute(\"d\"),\n      rawPath = stringToRawPath(pathData),\n      transform = this.path.getAttribute(\"transform\") || \"translate(0,0)\",\n      createAnchors = !this._rawPath || rawPath.totalPoints !== this._rawPath.totalPoints || rawPath.length !== this._rawPath.length,\n      anchorVars = {\n        callbackScope: this,\n        snap: this.vars.anchorSnap,\n        onDrag: this._onDragAnchor,\n        onPress: this._onPressAnchor,\n        onRelease: this._onRelease,\n        onClick: this._onClickAnchor,\n        onDragEnd: this._onDragEndAnchor,\n        maxX: this.vars.maxX,\n        minX: this.vars.minX\n      },\n      l,\n      i;\n    if (createAnchors && this._anchors && this._anchors.length) {\n      for (i = 0; i < this._anchors.length; i++) {\n        this._anchors[i].element.parentNode.removeChild(this._anchors[i].element);\n        this._anchors[i]._draggable.enabled(false);\n      }\n      this._selectedAnchors.length = 0;\n    }\n    this._rawPath = rawPath;\n    if (createAnchors) {\n      this._anchors = _createSegmentAnchors(rawPath, 0, this, anchorVars);\n      l = rawPath.length;\n      if (l > 1) {\n        for (i = 1; i < l; i++) {\n          this._anchors = this._anchors.concat(_createSegmentAnchors(rawPath, i, this, anchorVars));\n        }\n      }\n    } else {\n      i = this._anchors.length;\n      while (--i > -1) {\n        this._anchors[i].update(rawPath);\n      }\n    }\n    this._selection.appendChild(this._handle1); //for stacking order (handles should always be on top)\n\n    this._selection.appendChild(this._handle2); //\t\tthis._selectedAnchors.length = 0;\n\n    this._selectionPath.setAttribute(\"d\", pathData);\n    this._selectionHittest.setAttribute(\"d\", pathData);\n    this._g.setAttribute(\"transform\", _getConcatenatedTransforms(this.path.parentNode) || \"translate(0,0)\");\n    this._selection.setAttribute(\"transform\", transform);\n    this._selectionHittest.setAttribute(\"transform\", transform);\n    this._updateAnchors();\n    return this;\n  };\n  _proto3._saveState = function _saveState() {\n    _addHistory(this);\n  };\n  _proto3._onClickSelectionPath = function _onClickSelectionPath(e) {\n    if (this._selection.style.visibility === \"hidden\") {\n      this.select();\n    } else if (_ALT || e && e.altKey) {\n      var anchorVars = {\n          callbackScope: this,\n          snap: this.vars.anchorSnap,\n          onDrag: this._onDragAnchor,\n          onPress: this._onPressAnchor,\n          onRelease: this._onRelease,\n          onClick: this._onClickAnchor,\n          onDragEnd: this._onDragEndAnchor,\n          maxX: this.vars.maxX,\n          minX: this.vars.minX\n        },\n        ctm = this._selection.getScreenCTM().inverse(),\n        newIndex,\n        _i,\n        anchor,\n        x,\n        y,\n        closestData;\n      if (this._draggable) {\n        this._draggable._onRelease(e); //otherwise, ALT-click/dragging on a path would create a new anchor AND drag the entire path.\n      }\n      if (ctm) {\n        x = e.clientX * ctm.a + e.clientY * ctm.c + ctm.e;\n        y = e.clientX * ctm.b + e.clientY * ctm.d + ctm.f;\n      } //DEBUG: _createSVG(\"circle\", this._selection, {fill:\"red\", r:5, cx:x, cy:y});\n\n      closestData = getClosestData(this._rawPath, x, y);\n      subdivideSegment(this._rawPath[closestData.j], closestData.i, closestData.t);\n      newIndex = closestData.i + 6;\n      for (_i = 0; _i < this._anchors.length; _i++) {\n        if (this._anchors[_i].i >= newIndex && this._anchors[_i].j === closestData.j) {\n          this._anchors[_i].i += 6;\n        }\n      }\n      anchor = new Anchor(this, this._rawPath, closestData.j, newIndex, anchorVars);\n      this._selection.appendChild(this._handle1); //for stacking order (handles should always be on top)\n\n      this._selection.appendChild(this._handle2);\n      anchor._draggable._onPress(e);\n      _recentlyAddedAnchor = anchor;\n      this._anchors.push(anchor);\n      this._selectedAnchors.length = 0;\n      this._selectedAnchors.push(anchor);\n      this._updateAnchors();\n      this.update();\n      this._saveState();\n    }\n    _resetSelection();\n    _addListener(_win, \"touchforcechange\", _preventDefault); //otherwise iOS will scroll when dragging.\n\n    _callback(\"onPress\", this);\n  };\n  _proto3._onClickHandle1 = function _onClickHandle1() {\n    var anchor = this._editingAnchor,\n      i = anchor.i,\n      s = anchor.segment,\n      pi = anchor.isClosedStart ? s.length - 4 : i - 2;\n    if (_ALT && Math.abs(s[i] - s[pi]) < 5 && Math.abs(s[i + 1] - s[pi + 1]) < 5) {\n      this._onClickAnchor(anchor);\n    }\n  };\n  _proto3._onClickHandle2 = function _onClickHandle2() {\n    var anchor = this._editingAnchor,\n      i = anchor.i,\n      s = anchor.segment;\n    if (_ALT && Math.abs(s[i] - s[i + 2]) < 5 && Math.abs(s[i + 1] - s[i + 3]) < 5) {\n      this._onClickAnchor(anchor);\n    }\n  };\n  _proto3._onDragEndAnchor = function _onDragEndAnchor(e) {\n    _recentlyAddedAnchor = null;\n    this._saveState();\n  };\n  _proto3.isSelected = function isSelected() {\n    return this._selectedAnchors.length > 0 || this._selection.style.visibility === \"visible\";\n  };\n  _proto3.select = function select(allAnchors) {\n    this._selection.style.visibility = \"visible\";\n    this._editingAnchor = null;\n    this.path._gsSelection = true;\n    if (allAnchors === true) {\n      var _i2 = this._anchors.length;\n      while (--_i2 > -1) {\n        this._selectedAnchors[_i2] = this._anchors[_i2];\n      }\n    }\n    if (_selectedPaths.indexOf(this) === -1) {\n      _selectedPaths.push(this);\n    }\n    this._updateAnchors();\n    return this;\n  };\n  _proto3.deselect = function deselect() {\n    this._selection.style.visibility = \"hidden\";\n    this._selectedAnchors.length = 0;\n    this._editingAnchor = null;\n    this.path._gsSelection = false;\n    _selectedPaths.splice(_selectedPaths.indexOf(this), 1);\n    this._updateAnchors();\n    return this;\n  };\n  _proto3._onDragPath = function _onDragPath(e) {\n    var transform = this._selectionHittest.getAttribute(\"transform\") || \"translate(0,0)\";\n    this._selection.setAttribute(\"transform\", transform);\n    this.path.setAttribute(\"transform\", transform);\n  };\n  _proto3._onPressAnchor = function _onPressAnchor(anchor) {\n    if (this._selectedAnchors.indexOf(anchor) === -1) {\n      //if it isn't already selected...\n      if (!_SHIFT) {\n        this._selectedAnchors.length = 0;\n      }\n      this._selectedAnchors.push(anchor);\n    } else if (_SHIFT) {\n      this._selectedAnchors.splice(this._selectedAnchors.indexOf(anchor), 1);\n      anchor._draggable.endDrag();\n    }\n    _editingAxis.x = anchor.segment[anchor.i];\n    _editingAxis.y = anchor.segment[anchor.i + 1];\n    this._updateAnchors();\n    _callback(\"onPress\", this);\n  };\n  _proto3._deleteSelectedAnchors = function _deleteSelectedAnchors() {\n    var anchors = this._selectedAnchors,\n      i = anchors.length,\n      anchor,\n      index,\n      j,\n      jIndex;\n    while (--i > -1) {\n      anchor = anchors[i];\n      anchor.element.parentNode.removeChild(anchor.element);\n      anchor._draggable.enabled(false);\n      index = anchor.i;\n      jIndex = anchor.j;\n      if (!index) {\n        //first\n        anchor.segment.splice(index, 6);\n      } else if (index < anchor.segment.length - 2) {\n        anchor.segment.splice(index - 2, 6);\n      } else {\n        //last\n        anchor.segment.splice(index - 4, 6);\n      }\n      anchors.splice(i, 1);\n      this._anchors.splice(this._anchors.indexOf(anchor), 1);\n      for (j = 0; j < this._anchors.length; j++) {\n        if (this._anchors[j].i >= index && this._anchors[j].j === jIndex) {\n          this._anchors[j].i -= 6;\n        }\n      }\n    }\n    this._updateAnchors();\n    this.update();\n    this._saveState();\n    if (this.vars.onDeleteAnchor) {\n      this.vars.onDeleteAnchor.call(this.vars.callbackScope || this);\n    }\n  };\n  _proto3._onClickAnchor = function _onClickAnchor(anchor) {\n    var i = anchor.i,\n      segment = anchor.segment,\n      pi = anchor.isClosedStart ? segment.length - 4 : i - 2,\n      rnd = 1000,\n      isEnd = !i || i >= segment.length - 2,\n      angle1,\n      angle2,\n      length1,\n      length2,\n      sin,\n      cos;\n    if (_ALT && _recentlyAddedAnchor !== anchor && this._editingAnchor) {\n      anchor.smooth = !anchor.smooth;\n      if (isEnd && !anchor.isClosedStart) {\n        //the very ends can't be \"smooth\"\n        anchor.smooth = false;\n      }\n      anchor.element.setAttribute(\"d\", anchor.smooth ? this._circleHandle : this._squareHandle);\n      if (anchor.smooth && (!isEnd || anchor.isClosedStart)) {\n        angle1 = Math.atan2(segment[i + 1] - segment[pi + 1], segment[i] - segment[pi]);\n        angle2 = Math.atan2(segment[i + 3] - segment[i + 1], segment[i + 2] - segment[i]);\n        angle1 = (angle1 + angle2) / 2;\n        length1 = _getLength(segment, pi, i);\n        length2 = _getLength(segment, i, i + 2);\n        if (length1 < 0.2) {\n          length1 = _getLength(segment, i, pi - 4) / 4;\n          angle1 = angle2 || Math.atan2(segment[i + 7] - segment[pi - 3], segment[i + 6] - segment[pi - 4]);\n        }\n        if (length2 < 0.2) {\n          length2 = _getLength(segment, i, i + 6) / 4;\n          angle2 = angle1 || Math.atan2(segment[i + 7] - segment[pi - 3], segment[i + 6] - segment[pi - 4]);\n        }\n        sin = Math.sin(angle1);\n        cos = Math.cos(angle1);\n        if (Math.abs(angle2 - angle1) < Math.PI / 2) {\n          sin = -sin;\n          cos = -cos;\n        }\n        segment[pi] = ((segment[i] + cos * length1) * rnd | 0) / rnd;\n        segment[pi + 1] = ((segment[i + 1] + sin * length1) * rnd | 0) / rnd;\n        segment[i + 2] = ((segment[i] - cos * length2) * rnd | 0) / rnd;\n        segment[i + 3] = ((segment[i + 1] - sin * length2) * rnd | 0) / rnd;\n        this._updateAnchors();\n        this.update();\n        this._saveState();\n      } else if (!anchor.smooth && (!isEnd || anchor.isClosedStart)) {\n        if (i || anchor.isClosedStart) {\n          segment[pi] = segment[i];\n          segment[pi + 1] = segment[i + 1];\n        }\n        if (i < segment.length - 2) {\n          segment[i + 2] = segment[i];\n          segment[i + 3] = segment[i + 1];\n        }\n        this._updateAnchors();\n        this.update();\n        this._saveState();\n      }\n    } else if (!_SHIFT) {\n      this._selectedAnchors.length = 0;\n      this._selectedAnchors.push(anchor);\n    }\n    _recentlyAddedAnchor = null;\n    this._updateAnchors();\n  };\n  _proto3._updateAnchors = function _updateAnchors() {\n    var anchor = this._selectedAnchors.length === 1 ? this._selectedAnchors[0] : null,\n      segment = anchor ? anchor.segment : null,\n      i,\n      x,\n      y;\n    this._editingAnchor = anchor;\n    for (i = 0; i < this._anchors.length; i++) {\n      this._anchors[i].element.style.fill = this._selectedAnchors.indexOf(this._anchors[i]) !== -1 ? _selectionColor : \"white\"; //this._anchors[i].element.setAttribute(\"fill\", (this._selectedAnchors.indexOf(this._anchors[i]) !== -1) ? _selectionColor : \"white\");\n    }\n    if (anchor) {\n      this._handle1.setAttribute(\"d\", anchor.smooth ? this._circleHandle : this._squareHandle);\n      this._handle2.setAttribute(\"d\", anchor.smooth ? this._circleHandle : this._squareHandle);\n    }\n    i = anchor ? anchor.i : 0;\n    if (anchor && (i || anchor.isClosedStart)) {\n      x = anchor.isClosedStart ? segment[segment.length - 4] : segment[i - 2];\n      y = anchor.isClosedStart ? segment[segment.length - 3] : segment[i - 1]; //TODO: if they equal the anchor coordinates, just hide it.\n\n      this._handle1.style.visibility = this._line1.style.visibility = !_ALT && x === segment[i] && y === segment[i + 1] ? \"hidden\" : \"visible\";\n      this._handle1.setAttribute(\"transform\", \"translate(\" + x + _comma + y + \")\");\n      this._line1.setAttribute(\"points\", x + _comma + y + _comma + segment[i] + _comma + segment[i + 1]);\n    } else {\n      this._handle1.style.visibility = this._line1.style.visibility = \"hidden\";\n    }\n    if (anchor && i < segment.length - 2) {\n      x = segment[i + 2];\n      y = segment[i + 3];\n      this._handle2.style.visibility = this._line2.style.visibility = !_ALT && x === segment[i] && y === segment[i + 1] ? \"hidden\" : \"visible\";\n      this._handle2.setAttribute(\"transform\", \"translate(\" + x + _comma + y + \")\");\n      this._line2.setAttribute(\"points\", segment[i] + _comma + segment[i + 1] + _comma + x + _comma + y);\n    } else {\n      this._handle2.style.visibility = this._line2.style.visibility = \"hidden\";\n    }\n  };\n  _proto3._onPressAlt = function _onPressAlt() {\n    var anchor = this._editingAnchor;\n    if (anchor) {\n      if (anchor.i || anchor.isClosedStart) {\n        this._handle1.style.visibility = this._line1.style.visibility = \"visible\";\n      }\n      if (anchor.i < anchor.segment.length - 2) {\n        this._handle2.style.visibility = this._line2.style.visibility = \"visible\";\n      }\n    }\n  };\n  _proto3._onReleaseAlt = function _onReleaseAlt() {\n    var anchor = this._editingAnchor,\n      s,\n      i,\n      pi;\n    if (anchor) {\n      s = anchor.segment;\n      i = anchor.i;\n      pi = anchor.isClosedStart ? s.length - 4 : i - 2;\n      if (s[i] === s[pi] && s[i + 1] === s[pi + 1]) {\n        this._handle1.style.visibility = this._line1.style.visibility = \"hidden\";\n      }\n      if (s[i] === s[i + 2] && s[i + 1] === s[i + 3]) {\n        this._handle2.style.visibility = this._line2.style.visibility = \"hidden\";\n      }\n    }\n  };\n  _proto3._onPressHandle1 = function _onPressHandle1() {\n    if (this._editingAnchor.smooth) {\n      this._oppositeHandleLength = _getLength(this._editingAnchor.segment, this._editingAnchor.i, this._editingAnchor.i + 2);\n    }\n    _callback(\"onPress\", this);\n  };\n  _proto3._onPressHandle2 = function _onPressHandle2() {\n    if (this._editingAnchor.smooth) {\n      this._oppositeHandleLength = _getLength(this._editingAnchor.segment, this._editingAnchor.isClosedStart ? this._editingAnchor.segment.length - 4 : this._editingAnchor.i - 2, this._editingAnchor.i);\n    }\n    _callback(\"onPress\", this);\n  };\n  _proto3._onReleaseHandle = function _onReleaseHandle(e) {\n    this._onRelease(e);\n    this._saveState();\n  };\n  _proto3._onDragHandle1 = function _onDragHandle1() {\n    var anchor = this._editingAnchor,\n      s = anchor.segment,\n      i = anchor.i,\n      pi = anchor.isClosedStart ? s.length - 4 : i - 2,\n      rnd = 1000,\n      x = this._handle1._draggable.x,\n      y = this._handle1._draggable.y,\n      angle;\n    s[pi] = x = (x * rnd | 0) / rnd;\n    s[pi + 1] = y = (y * rnd | 0) / rnd;\n    if (anchor.smooth) {\n      if (_ALT) {\n        anchor.smooth = false;\n        anchor.element.setAttribute(\"d\", this._squareHandle);\n        this._handle1.setAttribute(\"d\", this._squareHandle);\n        this._handle2.setAttribute(\"d\", this._squareHandle);\n      } else {\n        angle = Math.atan2(s[i + 1] - y, s[i] - x);\n        x = this._oppositeHandleLength * Math.cos(angle);\n        y = this._oppositeHandleLength * Math.sin(angle);\n        s[i + 2] = ((s[i] + x) * rnd | 0) / rnd;\n        s[i + 3] = ((s[i + 1] + y) * rnd | 0) / rnd;\n      }\n    }\n    this.update();\n  };\n  _proto3._onDragHandle2 = function _onDragHandle2() {\n    var anchor = this._editingAnchor,\n      s = anchor.segment,\n      i = anchor.i,\n      pi = anchor.isClosedStart ? s.length - 4 : i - 2,\n      rnd = 1000,\n      x = this._handle2._draggable.x,\n      y = this._handle2._draggable.y,\n      angle;\n    s[i + 2] = x = (x * rnd | 0) / rnd;\n    s[i + 3] = y = (y * rnd | 0) / rnd;\n    if (anchor.smooth) {\n      if (_ALT) {\n        anchor.smooth = false;\n        anchor.element.setAttribute(\"d\", this._squareHandle);\n        this._handle1.setAttribute(\"d\", this._squareHandle);\n        this._handle2.setAttribute(\"d\", this._squareHandle);\n      } else {\n        angle = Math.atan2(s[i + 1] - y, s[i] - x);\n        x = this._oppositeHandleLength * Math.cos(angle);\n        y = this._oppositeHandleLength * Math.sin(angle);\n        s[pi] = ((s[i] + x) * rnd | 0) / rnd;\n        s[pi + 1] = ((s[i + 1] + y) * rnd | 0) / rnd;\n      }\n    }\n    this.update();\n  };\n  _proto3._onDragAnchor = function _onDragAnchor(anchor, changeX, changeY) {\n    var anchors = this._selectedAnchors,\n      l = anchors.length,\n      rnd = 1000,\n      i,\n      j,\n      s,\n      a,\n      pi;\n    for (j = 0; j < l; j++) {\n      a = anchors[j];\n      i = a.i;\n      s = a.segment;\n      if (i) {\n        s[i - 2] = ((s[i - 2] + changeX) * rnd | 0) / rnd;\n        s[i - 1] = ((s[i - 1] + changeY) * rnd | 0) / rnd;\n      } else if (a.isClosedStart) {\n        pi = s.length - 2;\n        s[pi] = _round(s[pi] + changeX);\n        s[pi + 1] = _round(s[pi + 1] + changeY);\n        s[pi - 2] = _round(s[pi - 2] + changeX);\n        s[pi - 1] = _round(s[pi - 1] + changeY);\n      }\n      s[i] = ((s[i] + changeX) * rnd | 0) / rnd;\n      s[i + 1] = ((s[i + 1] + changeY) * rnd | 0) / rnd;\n      if (i < s.length - 2) {\n        s[i + 2] = ((s[i + 2] + changeX) * rnd | 0) / rnd;\n        s[i + 3] = ((s[i + 3] + changeY) * rnd | 0) / rnd;\n      }\n      if (a !== anchor) {\n        a.element.setAttribute(\"transform\", \"translate(\" + s[i] + _comma + s[i + 1] + \")\");\n      }\n    }\n    this.update();\n  };\n  _proto3.enabled = function enabled(_enabled2) {\n    if (!arguments.length) {\n      return this._enabled;\n    }\n    var i = this._anchors.length;\n    while (--i > -1) {\n      this._anchors[i]._draggable.enabled(_enabled2);\n    }\n    this._enabled = _enabled2;\n    this._handle1._draggable.enabled(_enabled2);\n    this._handle2._draggable.enabled(_enabled2);\n    if (this._draggable) {\n      this._draggable.enabled(_enabled2);\n    }\n    if (!_enabled2) {\n      this.deselect();\n      this._selectionHittest.parentNode && this._selectionHittest.parentNode.removeChild(this._selectionHittest);\n      this._selection.parentNode && this._selection.parentNode.removeChild(this._selection);\n    } else if (!this._selection.parentNode) {\n      this.path.ownerSVGElement.appendChild(this._selectionHittest);\n      this.path.ownerSVGElement.appendChild(this._selection);\n      this.init();\n      this._saveState();\n    }\n    this._updateAnchors();\n    return this.update();\n  };\n  _proto3.update = function update(readPath) {\n    var d = \"\",\n      anchor = this._editingAnchor,\n      i,\n      s,\n      x,\n      y,\n      pi;\n    if (readPath) {\n      this.init();\n    }\n    if (anchor) {\n      i = anchor.i;\n      s = anchor.segment;\n      if (i || anchor.isClosedStart) {\n        pi = anchor.isClosedStart ? s.length - 4 : i - 2;\n        x = s[pi];\n        y = s[pi + 1];\n        this._handle1.setAttribute(\"transform\", \"translate(\" + x + _comma + y + \")\");\n        this._line1.setAttribute(\"points\", x + _comma + y + _comma + s[i] + _comma + s[i + 1]);\n      }\n      if (i < s.length - 2) {\n        x = s[i + 2];\n        y = s[i + 3];\n        this._handle2.setAttribute(\"transform\", \"translate(\" + x + _comma + y + \")\");\n        this._line2.setAttribute(\"points\", s[i] + _comma + s[i + 1] + _comma + x + _comma + y);\n      }\n    }\n    if (readPath) {\n      d = this.path.getAttribute(\"d\");\n    } else {\n      for (i = 0; i < this._rawPath.length; i++) {\n        s = this._rawPath[i];\n        if (s.length > 7) {\n          d += \"M\" + s[0] + _comma + s[1] + \"C\" + s.slice(2).join(_comma);\n        }\n      }\n      this.path.setAttribute(\"d\", d);\n      this._selectionPath.setAttribute(\"d\", d);\n      this._selectionHittest.setAttribute(\"d\", d);\n    }\n    if (this.vars.onUpdate && this._enabled) {\n      _callback(\"onUpdate\", this, d);\n    }\n    return this;\n  };\n  _proto3.getRawPath = function getRawPath(applyTransforms, offsetX, offsetY) {\n    if (applyTransforms) {\n      var m = _getConsolidatedMatrix(this.path);\n      return transformRawPath(copyRawPath(this._rawPath), 1, 0, 0, 1, m.e + (offsetX || 0), m.f + (offsetY || 0));\n    }\n    return this._rawPath;\n  };\n  _proto3.getString = function getString(applyTransforms, offsetX, offsetY) {\n    if (applyTransforms) {\n      var m = _getConsolidatedMatrix(this.path);\n      return rawPathToString(transformRawPath(copyRawPath(this._rawPath), 1, 0, 0, 1, m.e + (offsetX || 0), m.f + (offsetY || 0)));\n    }\n    return this.path.getAttribute(\"d\");\n  };\n  _proto3.getNormalizedSVG = function getNormalizedSVG(height, originY, shorten, onEaseError) {\n    var s = this._rawPath[0],\n      tx = s[0] * -1,\n      ty = originY === 0 ? 0 : -(originY || s[1]),\n      l = s.length,\n      sx = 1 / (s[l - 2] + tx),\n      sy = -height || s[l - 1] + ty,\n      rnd = 1000,\n      points,\n      i,\n      x1,\n      y1,\n      x2,\n      y2;\n    _temp.length = 0;\n    if (sy) {\n      //typically y ends at 1 (so that the end values are reached)\n      sy = 1 / sy;\n    } else {\n      //in case the ease returns to its beginning value, scale everything proportionally\n      sy = -sx;\n    }\n    sx *= rnd;\n    sy *= rnd;\n    for (i = 0; i < l; i += 2) {\n      _temp[i] = ((s[i] + tx) * sx | 0) / rnd;\n      _temp[i + 1] = ((s[i + 1] + ty) * sy | 0) / rnd;\n    }\n    if (onEaseError) {\n      points = [];\n      l = _temp.length;\n      for (i = 2; i < l; i += 6) {\n        x1 = _temp[i - 2];\n        y1 = _temp[i - 1];\n        x2 = _temp[i + 4];\n        y2 = _temp[i + 5];\n        points.push(x1, y1, x2, y2);\n        bezierToPoints(x1, y1, _temp[i], _temp[i + 1], _temp[i + 2], _temp[i + 3], x2, y2, 0.001, points, points.length - 2);\n      }\n      x1 = points[0];\n      l = points.length;\n      for (i = 2; i < l; i += 2) {\n        x2 = points[i];\n        if (x2 < x1 || x2 > 1 || x2 < 0) {\n          onEaseError();\n          break;\n        }\n        x1 = x2;\n      }\n    }\n    if (shorten && l === 8 && _temp[0] === 0 && _temp[1] === 0 && _temp[l - 2] === 1 && _temp[l - 1] === 1) {\n      return _temp.slice(2, 6).join(\",\");\n    }\n    _temp[2] = \"C\" + _temp[2];\n    return \"M\" + _temp.join(\",\");\n  };\n  _proto3.kill = function kill() {\n    this.enabled(false);\n    this._g.parentNode && this._g.parentNode.removeChild(this._g);\n  };\n  _proto3.revert = function revert() {\n    this.kill();\n  };\n  return PathEditor;\n}();\nPathEditor.simplifyPoints = simplifyPoints;\nPathEditor.pointsToSegment = pointsToSegment;\nPathEditor.simplifySVG = function (data, vars) {\n  //takes a <path> element or data string and simplifies it according to whatever tolerance you set (default:1, the bigger the number the more variance there can be). vars: {tolerance:1, cornerThreshold:degrees, curved:true}\n  var element, points, i, x1, x2, y1, y2, bezier, precision, tolerance, l, cornerThreshold;\n  vars = vars || {};\n  tolerance = vars.tolerance || 1;\n  precision = vars.precision || 1 / tolerance;\n  cornerThreshold = (vars.cornerThreshold === undefined ? 18 : +vars.cornerThreshold) * _DEG2RAD;\n  if (typeof data !== \"string\") {\n    //element\n    element = data;\n    data = element.getAttribute(\"d\");\n  }\n  if (data.charAt(0) === \"#\" || data.charAt(0) === \".\") {\n    //selector text\n    element = _doc.querySelector(data);\n    if (element) {\n      data = element.getAttribute(\"d\");\n    }\n  }\n  points = vars.curved === false && !/[achqstvz]/ig.test(data) ? data.match(_numbersExp) : stringToRawPath(data)[0];\n  if (vars.curved !== false) {\n    bezier = points;\n    points = [];\n    l = bezier.length;\n    for (i = 2; i < l; i += 6) {\n      x1 = +bezier[i - 2];\n      y1 = +bezier[i - 1];\n      x2 = +bezier[i + 4];\n      y2 = +bezier[i + 5];\n      points.push(_round(x1), _round(y1), _round(x2), _round(y2));\n      bezierToPoints(x1, y1, +bezier[i], +bezier[i + 1], +bezier[i + 2], +bezier[i + 3], x2, y2, 1 / (precision * 200000), points, points.length - 2);\n    }\n    points = pointsToSegment(simplifyPoints(points, tolerance), vars.curviness, cornerThreshold);\n    points[2] = \"C\" + points[2];\n  } else {\n    points = simplifyPoints(points, tolerance);\n  }\n  data = \"M\" + points.join(\",\");\n  if (element) {\n    element.setAttribute(\"d\", data);\n  }\n  return data;\n};\nPathEditor.create = function (target, vars) {\n  return new PathEditor(target, vars);\n};\nPathEditor.editingAxis = _editingAxis;\nPathEditor.getSnapFunction = function (vars) {\n  //{gridSize, radius, x, y, width, height}\n  var r = vars.radius || 2,\n    big = 1e20,\n    minX = vars.x || vars.x === 0 ? vars.x : vars.width ? 0 : -big,\n    minY = vars.y || vars.y === 0 ? vars.y : vars.height ? 0 : -big,\n    maxX = minX + (vars.width || big * big),\n    maxY = minY + (vars.height || big * big),\n    containX = vars.containX !== false,\n    containY = vars.containY !== false,\n    axis = vars.axis,\n    grid = vars.gridSize;\n  r *= r;\n  return function (p) {\n    var x = p.x,\n      y = p.y,\n      gridX,\n      gridY,\n      dx,\n      dy;\n    if (containX && x < minX || (dx = x - minX) * dx < r) {\n      x = minX;\n    } else if (containX && x > maxX || (dx = maxX - x) * dx < r) {\n      x = maxX;\n    }\n    if (containY && y < minY || (dy = y - minY) * dy < r) {\n      y = minY;\n    } else if (containY && y > maxY || (dy = maxY - y) * dy < r) {\n      y = maxY;\n    }\n    if (axis) {\n      dx = x - axis.x;\n      dy = y - axis.y;\n      if (dx * dx < r) {\n        x = axis.x;\n      }\n      if (dy * dy < r) {\n        y = axis.y;\n      }\n    }\n    if (grid) {\n      gridX = minX + Math.round((x - minX) / grid) * grid; //closest grid slot on x-axis\n\n      dx = gridX - x;\n      gridY = minY + Math.round((y - minY) / grid) * grid; //closest grid slot on y-axis\n\n      dy = gridY - y;\n      if (dx * dx + dy * dy < r) {\n        x = gridX;\n        y = gridY;\n      }\n    }\n    p.x = x;\n    p.y = y;\n  };\n};\nPathEditor.version = \"3.13.0\";\nPathEditor.register = _initCore;\nexport { PathEditor as default };","map":{"version":3,"names":["stringToRawPath","rawPathToString","bezierToPoints","simplifyPoints","pointsToSegment","subdivideSegment","getClosestData","copyRawPath","transformRawPath","getGlobalMatrix","Matrix2D","_numbersExp","_doc","_supportsPointer","_win","_body","gsap","_context","_selectionColor","_minimumMovement","_DEG2RAD","Math","PI","_getTime","Date","now","getTime","_lastInteraction","_isPressed","_emptyFunc","_interacted","_CTRL","_ALT","_SHIFT","_CMD","_recentlyAddedAnchor","_editingAxis","_history","_point","_temp","_comma","_selectedPaths","_preventDefault","event","preventDefault","preventManipulation","_createElement","type","createElementNS","createElement","_createSVG","container","attributes","element","reg","p","style","undefined","setAttributeNS","replace","toLowerCase","appendChild","_identityMatrixObject","matrix","_getConsolidatedMatrix","target","transform","baseVal","consolidate","_getConcatenatedTransforms","m","owner","ownerSVGElement","parentNode","multiply","a","b","c","d","e","f","_addHistory","pathEditor","selectedIndexes","_selectedAnchors","i","length","unshift","path","getAttribute","_round","value","_getSquarePathData","size","join","_getCirclePathData","circ","rcirc","_checkDeselect","_gsSelection","deselect","_tempDiv","_touchEventLookup","_isMultiTouching","_addListener","func","capture","addEventListener","touchType","passive","substr","attachEvent","_removeListener","removeEventListener","detachEvent","_hasTouchID","list","ID","identifier","_onMultiTouchDocumentEnd","touches","_dragCount","_onMultiTouchDocument","_bind","scope","call","_callback","self","param","callback","vars","callbackScope","_copyElement","_resetSelection","display","select","_coreInitted","_initCore","core","document","window","body","console","warn","context","types","standard","split","converted","onpointerdown","onmspointerdown","obj","SVGElement","prototype","getTransformToElement","getScreenCTM","inverse","key","keyCode","which","keyString","state","_onPressAlt","shift","setAttribute","init","_anchors","indexOf","push","_updateAnchors","update","onUndo","_deleteSelectedAnchors","_onReleaseAlt","PointerEvent","_onPress","ctm","touchEventTarget","temp","_matrix","getItem","_ctm","currentTarget","_onRelease","_onMove","changedTouches","touch","touchID","pointerId","_startPointerY","pointerY","pageY","_startPointerX","pointerX","pageX","_startElementX","_startElementY","isPressed","onPress","pointerEvent","originalEvent","_enabled","setPointerPosition","onDrag","force","wasDragging","isDragging","onClick","onDragRelease","onRelease","onDragEnd","_createSegmentAnchors","rawPath","j","editor","segment","l","closed","Anchor","isClosedStart","_getLength","i2","x","y","sqrt","DraggableSVG","querySelectorAll","snap","isNaN","maxX","minX","_bounds","enabled","_proto","rnd","xChange","yChange","arguments","dragging","_onClick","endDrag","_selection","fill","stroke","strokeWidth","vectorEffect","_draggable","_proto2","s","prevSmooth","smooth","pi","abs","atan2","_circleHandle","_squareHandle","PathEditor","_g","_selectionHittest","_selectionPath","_line1","_line2","pointerEvents","handleSize","_handle1","_handle2","_onDragHandle1","_onPressHandle1","_onReleaseHandle","_onClickHandle1","handleSnap","_onDragHandle2","_onPressHandle2","_onClickHandle2","visibility","selectionItems","draggable","_onDragPath","_saveState","selected","_onClickSelectionPath","_proto3","anchor","_editingAnchor","pathData","createAnchors","_rawPath","totalPoints","anchorVars","anchorSnap","_onDragAnchor","_onPressAnchor","_onClickAnchor","_onDragEndAnchor","removeChild","concat","altKey","newIndex","_i","closestData","clientX","clientY","t","isSelected","allAnchors","_i2","splice","anchors","index","jIndex","onDeleteAnchor","isEnd","angle1","angle2","length1","length2","sin","cos","_oppositeHandleLength","angle","changeX","changeY","_enabled2","readPath","slice","onUpdate","getRawPath","applyTransforms","offsetX","offsetY","getString","getNormalizedSVG","height","originY","shorten","onEaseError","tx","ty","sx","sy","points","x1","y1","x2","y2","kill","revert","simplifySVG","data","bezier","precision","tolerance","cornerThreshold","charAt","querySelector","curved","test","match","curviness","create","editingAxis","getSnapFunction","r","radius","big","width","minY","maxY","containX","containY","axis","grid","gridSize","gridX","gridY","dx","dy","round","version","register","default"],"sources":["/Users/anahlewi/Desktop/seka_jade-website/node_modules/gsap/utils/PathEditor.js"],"sourcesContent":["/*!\n * PathEditor 3.13.0\n * https://gsap.com\n *\n * Copyright 2008-2025, GreenSock. All rights reserved.\n * Subject to the terms at https://gsap.com/standard-license\n * @author: Jack Doyle, jack@greensock.com\n*/\n\n/* eslint-disable */\nimport { stringToRawPath, rawPathToString, bezierToPoints, simplifyPoints, pointsToSegment, subdivideSegment, getClosestData, copyRawPath, transformRawPath } from \"./paths.js\";\nimport { getGlobalMatrix, Matrix2D } from \"./matrix.js\";\n\nvar _numbersExp = /(?:(-)?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[0-9]/ig,\n    _doc,\n    _supportsPointer,\n    _win,\n    _body,\n    gsap,\n    _context,\n    _selectionColor = \"#4e7fff\",\n    _minimumMovement = 1,\n    _DEG2RAD = Math.PI / 180,\n    _getTime = Date.now || function () {\n  return new Date().getTime();\n},\n    _lastInteraction = 0,\n    _isPressed = 0,\n    _emptyFunc = function _emptyFunc() {\n  return false;\n},\n    _interacted = function _interacted() {\n  return _lastInteraction = _getTime();\n},\n    _CTRL,\n    _ALT,\n    _SHIFT,\n    _CMD,\n    _recentlyAddedAnchor,\n    _editingAxis = {},\n    //stores the x/y of the most recently-selected anchor point's x and y axis. We tap into this for snapping horizontally and vertically.\n_history = [],\n    _point = {},\n    //reuse to minimize memory and maximize performance (mostly for snapping)\n_temp = [],\n    //reuse this in places like getNormalizedSVG() to conserve memory\n_comma = \",\",\n    _selectedPaths = [],\n    _preventDefault = function _preventDefault(event) {\n  if (event.preventDefault) {\n    event.preventDefault();\n\n    if (event.preventManipulation) {\n      event.preventManipulation(); //for some Microsoft browsers\n    }\n  }\n},\n    _createElement = function _createElement(type) {\n  return _doc.createElementNS ? _doc.createElementNS(\"http://www.w3.org/1999/xhtml\", type) : _doc.createElement(type);\n},\n    _createSVG = function _createSVG(type, container, attributes) {\n  var element = _doc.createElementNS(\"http://www.w3.org/2000/svg\", type),\n      reg = /([a-z])([A-Z])/g,\n      p;\n\n  attributes = attributes || {};\n  attributes[\"class\"] = attributes[\"class\"] || \"path-editor\";\n\n  for (p in attributes) {\n    if (element.style[p] !== undefined) {\n      element.style[p] = attributes[p];\n    } else {\n      element.setAttributeNS(null, p.replace(reg, \"$1-$2\").toLowerCase(), attributes[p]);\n    }\n  }\n\n  container.appendChild(element);\n  return element;\n},\n    _identityMatrixObject = {\n  matrix: new Matrix2D()\n},\n    _getConsolidatedMatrix = function _getConsolidatedMatrix(target) {\n  return (target.transform && target.transform.baseVal.consolidate() || _identityMatrixObject).matrix;\n},\n    _getConcatenatedTransforms = function _getConcatenatedTransforms(target) {\n  var m = _getConsolidatedMatrix(target),\n      owner = target.ownerSVGElement;\n\n  while ((target = target.parentNode) && target.ownerSVGElement === owner) {\n    m.multiply(_getConsolidatedMatrix(target));\n  }\n\n  return \"matrix(\" + m.a + \",\" + m.b + \",\" + m.c + \",\" + m.d + \",\" + m.e + \",\" + m.f + \")\";\n},\n    _addHistory = function _addHistory(pathEditor) {\n  var selectedIndexes = [],\n      a = pathEditor._selectedAnchors,\n      i;\n\n  for (i = 0; i < a.length; i++) {\n    selectedIndexes[i] = a[i].i;\n  }\n\n  _history.unshift({\n    path: pathEditor,\n    d: pathEditor.path.getAttribute(\"d\"),\n    transform: pathEditor.path.getAttribute(\"transform\") || \"\",\n    selectedIndexes: selectedIndexes\n  });\n\n  if (_history.length > 30) {\n    _history.length = 30;\n  }\n},\n    _round = function _round(value) {\n  return ~~(value * 1000 + (value < 0 ? -.5 : .5)) / 1000;\n},\n    _getSquarePathData = function _getSquarePathData(size) {\n  size = _round(size);\n  return [\"M-\" + size, -size, size, -size, size, size, -size, size + \"z\"].join(_comma);\n},\n    _getCirclePathData = function _getCirclePathData(size) {\n  var circ = 0.552284749831,\n      rcirc = _round(size * circ);\n\n  size = _round(size);\n  return \"M\" + size + \",0C\" + [size, rcirc, rcirc, size, 0, size, -rcirc, size, -size, rcirc, -size, 0, -size, -rcirc, -rcirc, -size, 0, -size, rcirc, -size, size, -rcirc, size, 0].join(_comma) + \"z\";\n},\n    _checkDeselect = function _checkDeselect(e) {\n  if (!e.target._gsSelection && !_isPressed && _getTime() - _lastInteraction > 100) {\n    var i = _selectedPaths.length;\n\n    while (--i > -1) {\n      _selectedPaths[i].deselect();\n    }\n\n    _selectedPaths.length = 0;\n  }\n},\n    _tempDiv,\n    _touchEventLookup,\n    _isMultiTouching = 0,\n    _addListener = function _addListener(element, type, func, capture) {\n  if (element.addEventListener) {\n    var touchType = _touchEventLookup[type];\n    capture = capture || {\n      passive: false\n    };\n    element.addEventListener(touchType || type, func, capture);\n\n    if (touchType && type !== touchType && touchType.substr(0, 7) !== \"pointer\") {\n      //some browsers actually support both, so must we. But pointer events cover all.\n      element.addEventListener(type, func, capture);\n    }\n  } else if (element.attachEvent) {\n    element.attachEvent(\"on\" + type, func);\n  }\n},\n    _removeListener = function _removeListener(element, type, func) {\n  if (element.removeEventListener) {\n    var touchType = _touchEventLookup[type];\n    element.removeEventListener(touchType || type, func);\n\n    if (touchType && type !== touchType && touchType.substr(0, 7) !== \"pointer\") {\n      element.removeEventListener(type, func);\n    }\n  } else if (element.detachEvent) {\n    element.detachEvent(\"on\" + type, func);\n  }\n},\n    _hasTouchID = function _hasTouchID(list, ID) {\n  var i = list.length;\n\n  while (--i > -1) {\n    if (list[i].identifier === ID) {\n      return true;\n    }\n  }\n\n  return false;\n},\n    _onMultiTouchDocumentEnd = function _onMultiTouchDocumentEnd(e) {\n  _isMultiTouching = e.touches && _dragCount < e.touches.length;\n\n  _removeListener(e.target, \"touchend\", _onMultiTouchDocumentEnd);\n},\n    _onMultiTouchDocument = function _onMultiTouchDocument(e) {\n  _isMultiTouching = e.touches && _dragCount < e.touches.length;\n\n  _addListener(e.target, \"touchend\", _onMultiTouchDocumentEnd);\n},\n    _bind = function _bind(func, scope) {\n  return function (e) {\n    return func.call(scope, e);\n  };\n},\n    _callback = function _callback(type, self, param) {\n  var callback = self.vars[type];\n\n  if (callback) {\n    callback.call(self.vars.callbackScope || self, param || self);\n  }\n\n  return self;\n},\n    _copyElement,\n    _resetSelection = function _resetSelection() {\n  _copyElement.style.display = \"block\";\n\n  _copyElement.select();\n\n  _copyElement.style.display = \"none\";\n},\n    _coreInitted,\n    _initCore = function _initCore(core) {\n  _doc = document;\n  _win = window;\n  _body = _doc.body;\n  gsap = gsap || core || _win.gsap || console.warn(\"Please gsap.registerPlugin(PathEditor)\");\n\n  _context = gsap && gsap.core.context || function () {};\n\n  _tempDiv = _createElement(\"div\");\n  _copyElement = _createElement(\"textarea\");\n  _copyElement.style.display = \"none\";\n  _body && _body.appendChild(_copyElement);\n\n  _touchEventLookup = function (types) {\n    //we create an object that makes it easy to translate touch event types into their \"pointer\" counterparts if we're in a browser that uses those instead. Like IE10 uses \"MSPointerDown\" instead of \"touchstart\", for example.\n    var standard = types.split(\",\"),\n        converted = (_tempDiv.onpointerdown !== undefined ? \"pointerdown,pointermove,pointerup,pointercancel\" : _tempDiv.onmspointerdown !== undefined ? \"MSPointerDown,MSPointerMove,MSPointerUp,MSPointerCancel\" : types).split(\",\"),\n        obj = {},\n        i = 4;\n\n    while (--i > -1) {\n      obj[standard[i]] = converted[i];\n      obj[converted[i]] = standard[i];\n    }\n\n    return obj;\n  }(\"touchstart,touchmove,touchend,touchcancel\");\n\n  SVGElement.prototype.getTransformToElement = SVGElement.prototype.getTransformToElement || function (e) {\n    //adds Chrome support\n    return e.getScreenCTM().inverse().multiply(this.getScreenCTM());\n  };\n\n  _doc.addEventListener(\"keydown\", function (e) {\n    var key = e.keyCode || e.which,\n        keyString = e.key || key,\n        i,\n        state,\n        a,\n        path;\n\n    if (keyString === \"Shift\" || key === 16) {\n      _SHIFT = true;\n    } else if (keyString === \"Control\" || key === 17) {\n      _CTRL = true;\n    } else if (keyString === \"Meta\" || key === 91) {\n      _CMD = true;\n    } else if (keyString === \"Alt\" || key === 18) {\n      _ALT = true;\n      i = _selectedPaths.length;\n\n      while (--i > -1) {\n        _selectedPaths[i]._onPressAlt();\n      }\n    } else if ((keyString === \"z\" || key === 90) && (_CTRL || _CMD) && _history.length > 1) {\n      //UNDO\n      _history.shift();\n\n      state = _history[0];\n\n      if (state) {\n        path = state.path;\n        path.path.setAttribute(\"d\", state.d);\n        path.path.setAttribute(\"transform\", state.transform);\n        path.init();\n        a = path._anchors;\n\n        for (i = 0; i < a.length; i++) {\n          if (state.selectedIndexes.indexOf(a[i].i) !== -1) {\n            path._selectedAnchors.push(a[i]);\n          }\n        }\n\n        path._updateAnchors();\n\n        path.update();\n\n        if (path.vars.onUndo) {\n          path.vars.onUndo.call(path);\n        }\n      }\n    } else if (keyString === \"Delete\" || keyString === \"Backspace\" || key === 8 || key === 46 || key === 63272 || key === \"d\" && (_CTRL || _CMD)) {\n      //DELETE\n      i = _selectedPaths.length;\n\n      while (--i > -1) {\n        _selectedPaths[i]._deleteSelectedAnchors();\n      }\n    } else if ((keyString === \"a\" || key === 65) && (_CMD || _CTRL)) {\n      //SELECT ALL\n      i = _selectedPaths.length;\n\n      while (--i > -1) {\n        _selectedPaths[i].select(true);\n      }\n    }\n  }, true);\n\n  _doc.addEventListener(\"keyup\", function (e) {\n    var key = e.key || e.keyCode || e.which;\n\n    if (key === \"Shift\" || key === 16) {\n      _SHIFT = false;\n    } else if (key === \"Control\" || key === 17) {\n      _CTRL = false;\n    } else if (key === \"Meta\" || key === 91) {\n      _CMD = false;\n    } else if (key === \"Alt\" || key === 18) {\n      _ALT = false;\n      var i = _selectedPaths.length;\n\n      while (--i > -1) {\n        _selectedPaths[i]._onReleaseAlt();\n      }\n    }\n  }, true);\n\n  _supportsPointer = !!_win.PointerEvent;\n\n  _addListener(_doc, \"mouseup\", _checkDeselect);\n\n  _addListener(_doc, \"touchend\", _checkDeselect);\n\n  _addListener(_doc, \"touchcancel\", _emptyFunc); //some older Android devices intermittently stop dispatching \"touchmove\" events if we don't listen for \"touchcancel\" on the document. Very strange indeed.\n\n\n  _addListener(_win, \"touchmove\", _emptyFunc); //works around Safari bugs that still allow the page to scroll even when we preventDefault() on the touchmove event.\n\n\n  _body && _body.addEventListener(\"touchstart\", _emptyFunc); //works around Safari bug: https://gsap.com/forums/topic/21450-draggable-in-iframe-on-mobile-is-buggy/\n\n  _coreInitted = 1;\n},\n    _onPress = function _onPress(e) {\n  var self = this,\n      ctm = getGlobalMatrix(self.target.parentNode, true),\n      //previously used self.target.parentNode.getScreenCTM().inverse() but there's a major bug in Firefox that prevents it from working properly when there's an ancestor with a transform applied, so we bootstrapped our own solution that seems to work great across all browsers.\n  touchEventTarget,\n      temp;\n  this._matrix = this.target.transform.baseVal.getItem(0).matrix;\n  this._ctm = ctm;\n\n  if (_touchEventLookup[e.type]) {\n    //note: on iOS, BOTH touchmove and mousemove are dispatched, but the mousemove has pageY and pageX of 0 which would mess up the calculations and needlessly hurt performance.\n    touchEventTarget = e.type.indexOf(\"touch\") !== -1 ? e.currentTarget || e.target : _doc; //pointer-based touches (for Microsoft browsers) don't remain locked to the original target like other browsers, so we must use the document instead. The event type would be \"MSPointerDown\" or \"pointerdown\".\n\n    _addListener(touchEventTarget, \"touchend\", self._onRelease);\n\n    _addListener(touchEventTarget, \"touchmove\", self._onMove);\n\n    _addListener(touchEventTarget, \"touchcancel\", self._onRelease);\n\n    _addListener(_doc, \"touchstart\", _onMultiTouchDocument);\n\n    _addListener(_win, \"touchforcechange\", _preventDefault); //otherwise iOS will scroll when dragging.\n\n  } else {\n    touchEventTarget = null;\n\n    _addListener(_doc, \"mousemove\", self._onMove); //attach these to the document instead of the box itself so that if the user's mouse moves too quickly (and off of the box), things still work.\n\n  }\n\n  if (!_supportsPointer) {\n    _addListener(_doc, \"mouseup\", self._onRelease);\n  }\n\n  _preventDefault(e);\n\n  _resetSelection(); // when a PathEditor is in an iframe in an environment like codepen, this helps avoid situations where the DELETE key won't actually work because the parent frame is intercepting the event.\n\n\n  if (e.changedTouches) {\n    //touch events store the data slightly differently\n    e = self.touch = e.changedTouches[0];\n    self.touchID = e.identifier;\n  } else if (e.pointerId) {\n    self.touchID = e.pointerId; //for some Microsoft browsers\n  } else {\n    self.touch = self.touchID = null;\n  }\n\n  self._startPointerY = self.pointerY = e.pageY; //record the starting x and y so that we can calculate the movement from the original in _onMouseMove\n\n  self._startPointerX = self.pointerX = e.pageX;\n  self._startElementX = self._matrix.e;\n  self._startElementY = self._matrix.f;\n\n  if (this._ctm.a === 1 && this._ctm.b === 0 && this._ctm.c === 0 && this._ctm.d === 1) {\n    this._ctm = null;\n  } else {\n    temp = self._startPointerX * this._ctm.a + self._startPointerY * this._ctm.c + this._ctm.e;\n    self._startPointerY = self._startPointerX * this._ctm.b + self._startPointerY * this._ctm.d + this._ctm.f;\n    self._startPointerX = temp;\n  }\n\n  self.isPressed = _isPressed = true;\n  self.touchEventTarget = touchEventTarget;\n\n  if (self.vars.onPress) {\n    self.vars.onPress.call(self.vars.callbackScope || self, self.pointerEvent);\n  }\n},\n    _onMove = function _onMove(e) {\n  var self = this,\n      originalEvent = e,\n      touches,\n      i;\n\n  if (!self._enabled || _isMultiTouching || !self.isPressed || !e) {\n    return;\n  }\n\n  self.pointerEvent = e;\n  touches = e.changedTouches;\n\n  if (touches) {\n    //touch events store the data slightly differently\n    e = touches[0];\n\n    if (e !== self.touch && e.identifier !== self.touchID) {\n      //Usually changedTouches[0] will be what we're looking for, but in case it's not, look through the rest of the array...(and Android browsers don't reuse the event like iOS)\n      i = touches.length;\n\n      while (--i > -1 && (e = touches[i]).identifier !== self.touchID) {}\n\n      if (i < 0) {\n        return;\n      }\n    }\n  } else if (e.pointerId && self.touchID && e.pointerId !== self.touchID) {\n    //for some Microsoft browsers, we must attach the listener to the doc rather than the trigger so that when the finger moves outside the bounds of the trigger, things still work. So if the event we're receiving has a pointerId that doesn't match the touchID, ignore it (for multi-touch)\n    return;\n  }\n\n  _preventDefault(originalEvent);\n\n  self.setPointerPosition(e.pageX, e.pageY);\n\n  if (self.vars.onDrag) {\n    self.vars.onDrag.call(self.vars.callbackScope || self, self.pointerEvent);\n  }\n},\n    _onRelease = function _onRelease(e, force) {\n  var self = this;\n\n  if (!self._enabled || !self.isPressed || e && self.touchID != null && !force && (e.pointerId && e.pointerId !== self.touchID || e.changedTouches && !_hasTouchID(e.changedTouches, self.touchID))) {\n    //for some Microsoft browsers, we must attach the listener to the doc rather than the trigger so that when the finger moves outside the bounds of the trigger, things still work. So if the event we're receiving has a pointerId that doesn't match the touchID, ignore it (for multi-touch)\n    return;\n  }\n\n  _interacted();\n\n  self.isPressed = _isPressed = false; //TODO: if we want to accommodate multi-touch, we'd need to introduce a counter to track how many touches there are and only toggle this when they're all off.\n\n  var originalEvent = e,\n      wasDragging = self.isDragging,\n      touchEventTarget = self.touchEventTarget,\n      touches,\n      i;\n\n  if (touchEventTarget) {\n    _removeListener(touchEventTarget, \"touchend\", self._onRelease);\n\n    _removeListener(touchEventTarget, \"touchmove\", self._onMove);\n\n    _removeListener(touchEventTarget, \"touchcancel\", self._onRelease);\n\n    _removeListener(_doc, \"touchstart\", _onMultiTouchDocument);\n  } else {\n    _removeListener(_doc, \"mousemove\", self._onMove);\n  }\n\n  if (!_supportsPointer) {\n    _removeListener(_doc, \"mouseup\", self._onRelease);\n\n    if (e && e.target) {\n      _removeListener(e.target, \"mouseup\", self._onRelease);\n    }\n  }\n\n  if (wasDragging) {\n    self.isDragging = false;\n  } else if (self.vars.onClick) {\n    self.vars.onClick.call(self.vars.callbackScope || self, originalEvent);\n  }\n\n  if (e) {\n    touches = e.changedTouches;\n\n    if (touches) {\n      //touch events store the data slightly differently\n      e = touches[0];\n\n      if (e !== self.touch && e.identifier !== self.touchID) {\n        //Usually changedTouches[0] will be what we're looking for, but in case it's not, look through the rest of the array...(and Android browsers don't reuse the event like iOS)\n        i = touches.length;\n\n        while (--i > -1 && (e = touches[i]).identifier !== self.touchID) {}\n\n        if (i < 0) {\n          return;\n        }\n      }\n    }\n\n    self.pointerEvent = originalEvent;\n    self.pointerX = e.pageX;\n    self.pointerY = e.pageY;\n  }\n\n  if (originalEvent && !wasDragging && self.vars.onDragRelease) {\n    self.vars.onDragRelease.call(self, self.pointerEvent);\n  } else {\n    if (originalEvent) {\n      _preventDefault(originalEvent);\n    }\n\n    if (self.vars.onRelease) {\n      self.vars.onRelease.call(self.vars.callbackScope || self, self.pointerEvent);\n    }\n  }\n\n  if (wasDragging && self.vars.onDragEnd) {\n    self.vars.onDragEnd.call(self.vars.callbackScope || self, self.pointerEvent);\n  }\n\n  return true;\n},\n    _createSegmentAnchors = function _createSegmentAnchors(rawPath, j, editor, vars) {\n  var segment = rawPath[j],\n      l = segment.length - (segment.closed ? 6 : 0),\n      a = [],\n      i;\n\n  for (i = 0; i < l; i += 6) {\n    a.push(new Anchor(editor, rawPath, j, i, vars));\n  }\n\n  segment.closed && (a[0].isClosedStart = true);\n  return a;\n},\n    _getLength = function _getLength(segment, i, i2) {\n  //i is the starting index, and it'll return the length to the next x/y pair. So if you're looking for the length to handle1, you'd feed in the index of the handle control point x whereas if you're looking for the length to handle2, i would be the x of the anchor.\n  var x = segment[i2] - segment[i],\n      y = segment[i2 + 1] - segment[i + 1];\n  return Math.sqrt(x * x + y * y);\n};\n\nvar DraggableSVG = /*#__PURE__*/function () {\n  function DraggableSVG(target, vars) {\n    this.target = typeof target === \"string\" ? _doc.querySelectorAll(target)[0] : target;\n    this.vars = vars || {};\n    this._onPress = _bind(_onPress, this);\n    this._onMove = _bind(_onMove, this);\n    this._onRelease = _bind(_onRelease, this);\n    this.target.setAttribute(\"transform\", (this.target.getAttribute(\"transform\") || \"\") + \" translate(0,0)\");\n    this._matrix = _getConsolidatedMatrix(this.target);\n    this.x = this._matrix.e;\n    this.y = this._matrix.f;\n    this.snap = vars.snap;\n\n    if (!isNaN(vars.maxX) || !isNaN(vars.minX)) {\n      this._bounds = 1;\n      this.maxX = +vars.maxX;\n      this.minX = +vars.minX;\n    } else {\n      this._bounds = 0;\n    }\n\n    this.enabled(true);\n  }\n\n  var _proto = DraggableSVG.prototype;\n\n  _proto.setPointerPosition = function setPointerPosition(pointerX, pointerY) {\n    var rnd = 1000,\n        xChange,\n        yChange,\n        x,\n        y,\n        temp;\n    this.pointerX = pointerX;\n    this.pointerY = pointerY;\n\n    if (this._ctm) {\n      temp = pointerX * this._ctm.a + pointerY * this._ctm.c + this._ctm.e;\n      pointerY = pointerX * this._ctm.b + pointerY * this._ctm.d + this._ctm.f;\n      pointerX = temp;\n    }\n\n    yChange = pointerY - this._startPointerY;\n    xChange = pointerX - this._startPointerX;\n\n    if (yChange < _minimumMovement && yChange > -_minimumMovement) {\n      yChange = 0;\n    }\n\n    if (xChange < _minimumMovement && xChange > -_minimumMovement) {\n      xChange = 0;\n    }\n\n    x = ((this._startElementX + xChange) * rnd | 0) / rnd;\n    y = ((this._startElementY + yChange) * rnd | 0) / rnd;\n\n    if (this.snap && !_SHIFT) {\n      _point.x = x;\n      _point.y = y;\n      this.snap.call(this, _point);\n      x = _point.x;\n      y = _point.y;\n    }\n\n    if (this.x !== x || this.y !== y) {\n      this._matrix.f = this.y = y;\n      this._matrix.e = this.x = x;\n\n      if (!this.isDragging && this.isPressed) {\n        this.isDragging = true;\n\n        _callback(\"onDragStart\", this, this.pointerEvent);\n      }\n    }\n  };\n\n  _proto.enabled = function enabled(_enabled) {\n    if (!arguments.length) {\n      return this._enabled;\n    }\n\n    var dragging;\n    this._enabled = _enabled;\n\n    if (_enabled) {\n      if (!_supportsPointer) {\n        _addListener(this.target, \"mousedown\", this._onPress);\n      }\n\n      _addListener(this.target, \"touchstart\", this._onPress);\n\n      _addListener(this.target, \"click\", this._onClick, true); //note: used to pass true for capture but it prevented click-to-play-video functionality in Firefox.\n\n    } else {\n      dragging = this.isDragging;\n\n      _removeListener(this.target, \"mousedown\", this._onPress);\n\n      _removeListener(this.target, \"touchstart\", this._onPress);\n\n      _removeListener(_win, \"touchforcechange\", _preventDefault);\n\n      _removeListener(this.target, \"click\", this._onClick);\n\n      if (this.touchEventTarget) {\n        _removeListener(this.touchEventTarget, \"touchcancel\", this._onRelease);\n\n        _removeListener(this.touchEventTarget, \"touchend\", this._onRelease);\n\n        _removeListener(this.touchEventTarget, \"touchmove\", this._onMove);\n      }\n\n      _removeListener(_doc, \"mouseup\", this._onRelease);\n\n      _removeListener(_doc, \"mousemove\", this._onMove);\n\n      this.isDragging = this.isPressed = false;\n\n      if (dragging) {\n        _callback(\"onDragEnd\", this, this.pointerEvent);\n      }\n    }\n\n    return this;\n  };\n\n  _proto.endDrag = function endDrag(e) {\n    this._onRelease(e);\n  };\n\n  return DraggableSVG;\n}();\n\nvar Anchor = /*#__PURE__*/function () {\n  function Anchor(editor, rawPath, j, i, vars) {\n    this.editor = editor;\n    this.element = _createSVG(\"path\", editor._selection, {\n      fill: _selectionColor,\n      stroke: _selectionColor,\n      strokeWidth: 2,\n      vectorEffect: \"non-scaling-stroke\"\n    });\n    this.update(rawPath, j, i);\n    this.element._gsSelection = true;\n    this.vars = vars || {};\n    this._draggable = new DraggableSVG(this.element, {\n      callbackScope: this,\n      onDrag: this.onDrag,\n      snap: this.vars.snap,\n      onPress: this.onPress,\n      onRelease: this.onRelease,\n      onClick: this.onClick,\n      onDragEnd: this.onDragEnd\n    });\n  }\n\n  var _proto2 = Anchor.prototype;\n\n  _proto2.onPress = function onPress() {\n    _callback(\"onPress\", this);\n  };\n\n  _proto2.onClick = function onClick() {\n    _callback(\"onClick\", this);\n  };\n\n  _proto2.onDrag = function onDrag() {\n    var s = this.segment;\n    this.vars.onDrag.call(this.vars.callbackScope || this, this, this._draggable.x - s[this.i], this._draggable.y - s[this.i + 1]);\n  };\n\n  _proto2.onDragEnd = function onDragEnd() {\n    _callback(\"onDragEnd\", this);\n  };\n\n  _proto2.onRelease = function onRelease() {\n    _callback(\"onRelease\", this);\n  };\n\n  _proto2.update = function update(rawPath, j, i) {\n    if (rawPath) {\n      this.rawPath = rawPath;\n    }\n\n    if (arguments.length <= 1) {\n      j = this.j;\n      i = this.i;\n    } else {\n      this.j = j;\n      this.i = i;\n    }\n\n    var prevSmooth = this.smooth,\n        segment = this.rawPath[j],\n        pi = i === 0 && segment.closed ? segment.length - 4 : i - 2;\n    this.segment = segment;\n    this.smooth = i > 0 && i < segment.length - 2 && Math.abs(Math.atan2(segment[i + 1] - segment[pi + 1], segment[i] - segment[pi]) - Math.atan2(segment[i + 3] - segment[i + 1], segment[i + 2] - segment[i])) < 0.09 ? 2 : 0; //0: corner, 1: smooth but not mirrored, 2: smooth and mirrored.\n\n    if (this.smooth !== prevSmooth) {\n      this.element.setAttribute(\"d\", this.smooth ? this.editor._circleHandle : this.editor._squareHandle);\n    }\n\n    this.element.setAttribute(\"transform\", \"translate(\" + segment[i] + \",\" + segment[i + 1] + \")\");\n  };\n\n  return Anchor;\n}();\n\nexport var PathEditor = /*#__PURE__*/function () {\n  function PathEditor(target, vars) {\n    vars = vars || {};\n    _coreInitted || _initCore();\n    this.vars = vars;\n    this.path = typeof target === \"string\" ? _doc.querySelectorAll(target)[0] : target;\n    this._g = _createSVG(\"g\", this.path.ownerSVGElement, {\n      \"class\": \"path-editor-g path-editor\"\n    });\n    this._selectionHittest = _createSVG(\"path\", this._g, {\n      stroke: \"transparent\",\n      strokeWidth: 16,\n      fill: \"none\",\n      vectorEffect: \"non-scaling-stroke\"\n    });\n    this._selection = vars._selection || _createSVG(\"g\", this._g, {\n      \"class\": \"path-editor-selection path-editor\"\n    });\n    this._selectionPath = _createSVG(\"path\", this._selection, {\n      stroke: _selectionColor,\n      strokeWidth: 2,\n      fill: \"none\",\n      vectorEffect: \"non-scaling-stroke\"\n    });\n    this._selectedAnchors = [];\n    this._line1 = _createSVG(\"polyline\", this._selection, {\n      stroke: _selectionColor,\n      strokeWidth: 2,\n      vectorEffect: \"non-scaling-stroke\"\n    });\n    this._line2 = _createSVG(\"polyline\", this._selection, {\n      stroke: _selectionColor,\n      strokeWidth: 2,\n      vectorEffect: \"non-scaling-stroke\"\n    });\n    this._line1.style.pointerEvents = this._line2.style.pointerEvents = this._selectionPath.style.pointerEvents = \"none\";\n    this._enabled = true;\n    var ctm = this.path.parentNode.getScreenCTM().inverse(),\n        size = (ctm.a + ctm.d) / 2 * (vars.handleSize || 5);\n    this._squareHandle = _getSquarePathData(size);\n    this._circleHandle = _getCirclePathData(size * 1.15);\n    this._handle1 = _createSVG(\"path\", this._selection, {\n      d: this._squareHandle,\n      fill: _selectionColor,\n      stroke: \"transparent\",\n      strokeWidth: 6\n    });\n    this._handle2 = _createSVG(\"path\", this._selection, {\n      d: this._squareHandle,\n      fill: _selectionColor,\n      stroke: \"transparent\",\n      strokeWidth: 6\n    });\n    this._handle1._draggable = new DraggableSVG(this._handle1, {\n      onDrag: this._onDragHandle1,\n      callbackScope: this,\n      onPress: this._onPressHandle1,\n      onRelease: this._onReleaseHandle,\n      onClick: this._onClickHandle1,\n      snap: vars.handleSnap\n    });\n    this._handle2._draggable = new DraggableSVG(this._handle2, {\n      onDrag: this._onDragHandle2,\n      callbackScope: this,\n      onPress: this._onPressHandle2,\n      onRelease: this._onReleaseHandle,\n      onClick: this._onClickHandle2,\n      snap: vars.handleSnap\n    });\n    this._handle1.style.visibility = this._handle2.style.visibility = \"hidden\";\n    var selectionItems = [this._handle1, this._handle2, this._line1, this._line2, this._selection, this._selectionPath, this._selectionHittest],\n        i = selectionItems.length;\n\n    while (--i > -1) {\n      selectionItems[i]._gsSelection = true; //just a flag we can check in the _checkDeselect() method to detect clicks on things that are selection-related.\n    }\n\n    if (vars.draggable !== false) {\n      this._draggable = new DraggableSVG(this._selectionHittest, {\n        callbackScope: this,\n        onPress: this.select,\n        onRelease: this._onRelease,\n        onDrag: this._onDragPath,\n        onDragEnd: this._saveState,\n        maxX: this.vars.maxX,\n        minX: this.vars.minX\n      });\n    }\n\n    this.init();\n    this._selection.style.visibility = vars.selected === false ? \"hidden\" : \"visible\";\n\n    if (vars.selected !== false) {\n      this.path._gsSelection = true;\n\n      _selectedPaths.push(this);\n    }\n\n    this._saveState();\n\n    if (!_supportsPointer) {\n      _addListener(this._selectionHittest, \"mousedown\", _bind(this._onClickSelectionPath, this));\n\n      _addListener(this._selectionHittest, \"mouseup\", _bind(this._onRelease, this));\n    }\n\n    _addListener(this._selectionHittest, \"touchstart\", _bind(this._onClickSelectionPath, this));\n\n    _addListener(this._selectionHittest, \"touchend\", _bind(this._onRelease, this));\n\n    _context(this);\n  }\n\n  var _proto3 = PathEditor.prototype;\n\n  _proto3._onRelease = function _onRelease(e) {\n    var anchor = this._editingAnchor;\n\n    if (anchor) {\n      _editingAxis.x = anchor.segment[anchor.i];\n      _editingAxis.y = anchor.segment[anchor.i + 1];\n    }\n\n    _removeListener(_win, \"touchforcechange\", _preventDefault); //otherwise iOS will scroll when dragging.\n\n\n    _callback(\"onRelease\", this, e);\n  };\n\n  _proto3.init = function init() {\n    var pathData = this.path.getAttribute(\"d\"),\n        rawPath = stringToRawPath(pathData),\n        transform = this.path.getAttribute(\"transform\") || \"translate(0,0)\",\n        createAnchors = !this._rawPath || rawPath.totalPoints !== this._rawPath.totalPoints || rawPath.length !== this._rawPath.length,\n        anchorVars = {\n      callbackScope: this,\n      snap: this.vars.anchorSnap,\n      onDrag: this._onDragAnchor,\n      onPress: this._onPressAnchor,\n      onRelease: this._onRelease,\n      onClick: this._onClickAnchor,\n      onDragEnd: this._onDragEndAnchor,\n      maxX: this.vars.maxX,\n      minX: this.vars.minX\n    },\n        l,\n        i;\n\n    if (createAnchors && this._anchors && this._anchors.length) {\n      for (i = 0; i < this._anchors.length; i++) {\n        this._anchors[i].element.parentNode.removeChild(this._anchors[i].element);\n\n        this._anchors[i]._draggable.enabled(false);\n      }\n\n      this._selectedAnchors.length = 0;\n    }\n\n    this._rawPath = rawPath;\n\n    if (createAnchors) {\n      this._anchors = _createSegmentAnchors(rawPath, 0, this, anchorVars);\n      l = rawPath.length;\n\n      if (l > 1) {\n        for (i = 1; i < l; i++) {\n          this._anchors = this._anchors.concat(_createSegmentAnchors(rawPath, i, this, anchorVars));\n        }\n      }\n    } else {\n      i = this._anchors.length;\n\n      while (--i > -1) {\n        this._anchors[i].update(rawPath);\n      }\n    }\n\n    this._selection.appendChild(this._handle1); //for stacking order (handles should always be on top)\n\n\n    this._selection.appendChild(this._handle2); //\t\tthis._selectedAnchors.length = 0;\n\n\n    this._selectionPath.setAttribute(\"d\", pathData);\n\n    this._selectionHittest.setAttribute(\"d\", pathData);\n\n    this._g.setAttribute(\"transform\", _getConcatenatedTransforms(this.path.parentNode) || \"translate(0,0)\");\n\n    this._selection.setAttribute(\"transform\", transform);\n\n    this._selectionHittest.setAttribute(\"transform\", transform);\n\n    this._updateAnchors();\n\n    return this;\n  };\n\n  _proto3._saveState = function _saveState() {\n    _addHistory(this);\n  };\n\n  _proto3._onClickSelectionPath = function _onClickSelectionPath(e) {\n    if (this._selection.style.visibility === \"hidden\") {\n      this.select();\n    } else if (_ALT || e && e.altKey) {\n      var anchorVars = {\n        callbackScope: this,\n        snap: this.vars.anchorSnap,\n        onDrag: this._onDragAnchor,\n        onPress: this._onPressAnchor,\n        onRelease: this._onRelease,\n        onClick: this._onClickAnchor,\n        onDragEnd: this._onDragEndAnchor,\n        maxX: this.vars.maxX,\n        minX: this.vars.minX\n      },\n          ctm = this._selection.getScreenCTM().inverse(),\n          newIndex,\n          _i,\n          anchor,\n          x,\n          y,\n          closestData;\n\n      if (this._draggable) {\n        this._draggable._onRelease(e); //otherwise, ALT-click/dragging on a path would create a new anchor AND drag the entire path.\n\n      }\n\n      if (ctm) {\n        x = e.clientX * ctm.a + e.clientY * ctm.c + ctm.e;\n        y = e.clientX * ctm.b + e.clientY * ctm.d + ctm.f;\n      } //DEBUG: _createSVG(\"circle\", this._selection, {fill:\"red\", r:5, cx:x, cy:y});\n\n\n      closestData = getClosestData(this._rawPath, x, y);\n      subdivideSegment(this._rawPath[closestData.j], closestData.i, closestData.t);\n      newIndex = closestData.i + 6;\n\n      for (_i = 0; _i < this._anchors.length; _i++) {\n        if (this._anchors[_i].i >= newIndex && this._anchors[_i].j === closestData.j) {\n          this._anchors[_i].i += 6;\n        }\n      }\n\n      anchor = new Anchor(this, this._rawPath, closestData.j, newIndex, anchorVars);\n\n      this._selection.appendChild(this._handle1); //for stacking order (handles should always be on top)\n\n\n      this._selection.appendChild(this._handle2);\n\n      anchor._draggable._onPress(e);\n\n      _recentlyAddedAnchor = anchor;\n\n      this._anchors.push(anchor);\n\n      this._selectedAnchors.length = 0;\n\n      this._selectedAnchors.push(anchor);\n\n      this._updateAnchors();\n\n      this.update();\n\n      this._saveState();\n    }\n\n    _resetSelection();\n\n    _addListener(_win, \"touchforcechange\", _preventDefault); //otherwise iOS will scroll when dragging.\n\n\n    _callback(\"onPress\", this);\n  };\n\n  _proto3._onClickHandle1 = function _onClickHandle1() {\n    var anchor = this._editingAnchor,\n        i = anchor.i,\n        s = anchor.segment,\n        pi = anchor.isClosedStart ? s.length - 4 : i - 2;\n\n    if (_ALT && Math.abs(s[i] - s[pi]) < 5 && Math.abs(s[i + 1] - s[pi + 1]) < 5) {\n      this._onClickAnchor(anchor);\n    }\n  };\n\n  _proto3._onClickHandle2 = function _onClickHandle2() {\n    var anchor = this._editingAnchor,\n        i = anchor.i,\n        s = anchor.segment;\n\n    if (_ALT && Math.abs(s[i] - s[i + 2]) < 5 && Math.abs(s[i + 1] - s[i + 3]) < 5) {\n      this._onClickAnchor(anchor);\n    }\n  };\n\n  _proto3._onDragEndAnchor = function _onDragEndAnchor(e) {\n    _recentlyAddedAnchor = null;\n\n    this._saveState();\n  };\n\n  _proto3.isSelected = function isSelected() {\n    return this._selectedAnchors.length > 0 || this._selection.style.visibility === \"visible\";\n  };\n\n  _proto3.select = function select(allAnchors) {\n    this._selection.style.visibility = \"visible\";\n    this._editingAnchor = null;\n    this.path._gsSelection = true;\n\n    if (allAnchors === true) {\n      var _i2 = this._anchors.length;\n\n      while (--_i2 > -1) {\n        this._selectedAnchors[_i2] = this._anchors[_i2];\n      }\n    }\n\n    if (_selectedPaths.indexOf(this) === -1) {\n      _selectedPaths.push(this);\n    }\n\n    this._updateAnchors();\n\n    return this;\n  };\n\n  _proto3.deselect = function deselect() {\n    this._selection.style.visibility = \"hidden\";\n    this._selectedAnchors.length = 0;\n    this._editingAnchor = null;\n    this.path._gsSelection = false;\n\n    _selectedPaths.splice(_selectedPaths.indexOf(this), 1);\n\n    this._updateAnchors();\n\n    return this;\n  };\n\n  _proto3._onDragPath = function _onDragPath(e) {\n    var transform = this._selectionHittest.getAttribute(\"transform\") || \"translate(0,0)\";\n\n    this._selection.setAttribute(\"transform\", transform);\n\n    this.path.setAttribute(\"transform\", transform);\n  };\n\n  _proto3._onPressAnchor = function _onPressAnchor(anchor) {\n    if (this._selectedAnchors.indexOf(anchor) === -1) {\n      //if it isn't already selected...\n      if (!_SHIFT) {\n        this._selectedAnchors.length = 0;\n      }\n\n      this._selectedAnchors.push(anchor);\n    } else if (_SHIFT) {\n      this._selectedAnchors.splice(this._selectedAnchors.indexOf(anchor), 1);\n\n      anchor._draggable.endDrag();\n    }\n\n    _editingAxis.x = anchor.segment[anchor.i];\n    _editingAxis.y = anchor.segment[anchor.i + 1];\n\n    this._updateAnchors();\n\n    _callback(\"onPress\", this);\n  };\n\n  _proto3._deleteSelectedAnchors = function _deleteSelectedAnchors() {\n    var anchors = this._selectedAnchors,\n        i = anchors.length,\n        anchor,\n        index,\n        j,\n        jIndex;\n\n    while (--i > -1) {\n      anchor = anchors[i];\n      anchor.element.parentNode.removeChild(anchor.element);\n\n      anchor._draggable.enabled(false);\n\n      index = anchor.i;\n      jIndex = anchor.j;\n\n      if (!index) {\n        //first\n        anchor.segment.splice(index, 6);\n      } else if (index < anchor.segment.length - 2) {\n        anchor.segment.splice(index - 2, 6);\n      } else {\n        //last\n        anchor.segment.splice(index - 4, 6);\n      }\n\n      anchors.splice(i, 1);\n\n      this._anchors.splice(this._anchors.indexOf(anchor), 1);\n\n      for (j = 0; j < this._anchors.length; j++) {\n        if (this._anchors[j].i >= index && this._anchors[j].j === jIndex) {\n          this._anchors[j].i -= 6;\n        }\n      }\n    }\n\n    this._updateAnchors();\n\n    this.update();\n\n    this._saveState();\n\n    if (this.vars.onDeleteAnchor) {\n      this.vars.onDeleteAnchor.call(this.vars.callbackScope || this);\n    }\n  };\n\n  _proto3._onClickAnchor = function _onClickAnchor(anchor) {\n    var i = anchor.i,\n        segment = anchor.segment,\n        pi = anchor.isClosedStart ? segment.length - 4 : i - 2,\n        rnd = 1000,\n        isEnd = !i || i >= segment.length - 2,\n        angle1,\n        angle2,\n        length1,\n        length2,\n        sin,\n        cos;\n\n    if (_ALT && _recentlyAddedAnchor !== anchor && this._editingAnchor) {\n      anchor.smooth = !anchor.smooth;\n\n      if (isEnd && !anchor.isClosedStart) {\n        //the very ends can't be \"smooth\"\n        anchor.smooth = false;\n      }\n\n      anchor.element.setAttribute(\"d\", anchor.smooth ? this._circleHandle : this._squareHandle);\n\n      if (anchor.smooth && (!isEnd || anchor.isClosedStart)) {\n        angle1 = Math.atan2(segment[i + 1] - segment[pi + 1], segment[i] - segment[pi]);\n        angle2 = Math.atan2(segment[i + 3] - segment[i + 1], segment[i + 2] - segment[i]);\n        angle1 = (angle1 + angle2) / 2;\n        length1 = _getLength(segment, pi, i);\n        length2 = _getLength(segment, i, i + 2);\n\n        if (length1 < 0.2) {\n          length1 = _getLength(segment, i, pi - 4) / 4;\n          angle1 = angle2 || Math.atan2(segment[i + 7] - segment[pi - 3], segment[i + 6] - segment[pi - 4]);\n        }\n\n        if (length2 < 0.2) {\n          length2 = _getLength(segment, i, i + 6) / 4;\n          angle2 = angle1 || Math.atan2(segment[i + 7] - segment[pi - 3], segment[i + 6] - segment[pi - 4]);\n        }\n\n        sin = Math.sin(angle1);\n        cos = Math.cos(angle1);\n\n        if (Math.abs(angle2 - angle1) < Math.PI / 2) {\n          sin = -sin;\n          cos = -cos;\n        }\n\n        segment[pi] = ((segment[i] + cos * length1) * rnd | 0) / rnd;\n        segment[pi + 1] = ((segment[i + 1] + sin * length1) * rnd | 0) / rnd;\n        segment[i + 2] = ((segment[i] - cos * length2) * rnd | 0) / rnd;\n        segment[i + 3] = ((segment[i + 1] - sin * length2) * rnd | 0) / rnd;\n\n        this._updateAnchors();\n\n        this.update();\n\n        this._saveState();\n      } else if (!anchor.smooth && (!isEnd || anchor.isClosedStart)) {\n        if (i || anchor.isClosedStart) {\n          segment[pi] = segment[i];\n          segment[pi + 1] = segment[i + 1];\n        }\n\n        if (i < segment.length - 2) {\n          segment[i + 2] = segment[i];\n          segment[i + 3] = segment[i + 1];\n        }\n\n        this._updateAnchors();\n\n        this.update();\n\n        this._saveState();\n      }\n    } else if (!_SHIFT) {\n      this._selectedAnchors.length = 0;\n\n      this._selectedAnchors.push(anchor);\n    }\n\n    _recentlyAddedAnchor = null;\n\n    this._updateAnchors();\n  };\n\n  _proto3._updateAnchors = function _updateAnchors() {\n    var anchor = this._selectedAnchors.length === 1 ? this._selectedAnchors[0] : null,\n        segment = anchor ? anchor.segment : null,\n        i,\n        x,\n        y;\n    this._editingAnchor = anchor;\n\n    for (i = 0; i < this._anchors.length; i++) {\n      this._anchors[i].element.style.fill = this._selectedAnchors.indexOf(this._anchors[i]) !== -1 ? _selectionColor : \"white\"; //this._anchors[i].element.setAttribute(\"fill\", (this._selectedAnchors.indexOf(this._anchors[i]) !== -1) ? _selectionColor : \"white\");\n    }\n\n    if (anchor) {\n      this._handle1.setAttribute(\"d\", anchor.smooth ? this._circleHandle : this._squareHandle);\n\n      this._handle2.setAttribute(\"d\", anchor.smooth ? this._circleHandle : this._squareHandle);\n    }\n\n    i = anchor ? anchor.i : 0;\n\n    if (anchor && (i || anchor.isClosedStart)) {\n      x = anchor.isClosedStart ? segment[segment.length - 4] : segment[i - 2];\n      y = anchor.isClosedStart ? segment[segment.length - 3] : segment[i - 1]; //TODO: if they equal the anchor coordinates, just hide it.\n\n      this._handle1.style.visibility = this._line1.style.visibility = !_ALT && x === segment[i] && y === segment[i + 1] ? \"hidden\" : \"visible\";\n\n      this._handle1.setAttribute(\"transform\", \"translate(\" + x + _comma + y + \")\");\n\n      this._line1.setAttribute(\"points\", x + _comma + y + _comma + segment[i] + _comma + segment[i + 1]);\n    } else {\n      this._handle1.style.visibility = this._line1.style.visibility = \"hidden\";\n    }\n\n    if (anchor && i < segment.length - 2) {\n      x = segment[i + 2];\n      y = segment[i + 3];\n      this._handle2.style.visibility = this._line2.style.visibility = !_ALT && x === segment[i] && y === segment[i + 1] ? \"hidden\" : \"visible\";\n\n      this._handle2.setAttribute(\"transform\", \"translate(\" + x + _comma + y + \")\");\n\n      this._line2.setAttribute(\"points\", segment[i] + _comma + segment[i + 1] + _comma + x + _comma + y);\n    } else {\n      this._handle2.style.visibility = this._line2.style.visibility = \"hidden\";\n    }\n  };\n\n  _proto3._onPressAlt = function _onPressAlt() {\n    var anchor = this._editingAnchor;\n\n    if (anchor) {\n      if (anchor.i || anchor.isClosedStart) {\n        this._handle1.style.visibility = this._line1.style.visibility = \"visible\";\n      }\n\n      if (anchor.i < anchor.segment.length - 2) {\n        this._handle2.style.visibility = this._line2.style.visibility = \"visible\";\n      }\n    }\n  };\n\n  _proto3._onReleaseAlt = function _onReleaseAlt() {\n    var anchor = this._editingAnchor,\n        s,\n        i,\n        pi;\n\n    if (anchor) {\n      s = anchor.segment;\n      i = anchor.i;\n      pi = anchor.isClosedStart ? s.length - 4 : i - 2;\n\n      if (s[i] === s[pi] && s[i + 1] === s[pi + 1]) {\n        this._handle1.style.visibility = this._line1.style.visibility = \"hidden\";\n      }\n\n      if (s[i] === s[i + 2] && s[i + 1] === s[i + 3]) {\n        this._handle2.style.visibility = this._line2.style.visibility = \"hidden\";\n      }\n    }\n  };\n\n  _proto3._onPressHandle1 = function _onPressHandle1() {\n    if (this._editingAnchor.smooth) {\n      this._oppositeHandleLength = _getLength(this._editingAnchor.segment, this._editingAnchor.i, this._editingAnchor.i + 2);\n    }\n\n    _callback(\"onPress\", this);\n  };\n\n  _proto3._onPressHandle2 = function _onPressHandle2() {\n    if (this._editingAnchor.smooth) {\n      this._oppositeHandleLength = _getLength(this._editingAnchor.segment, this._editingAnchor.isClosedStart ? this._editingAnchor.segment.length - 4 : this._editingAnchor.i - 2, this._editingAnchor.i);\n    }\n\n    _callback(\"onPress\", this);\n  };\n\n  _proto3._onReleaseHandle = function _onReleaseHandle(e) {\n    this._onRelease(e);\n\n    this._saveState();\n  };\n\n  _proto3._onDragHandle1 = function _onDragHandle1() {\n    var anchor = this._editingAnchor,\n        s = anchor.segment,\n        i = anchor.i,\n        pi = anchor.isClosedStart ? s.length - 4 : i - 2,\n        rnd = 1000,\n        x = this._handle1._draggable.x,\n        y = this._handle1._draggable.y,\n        angle;\n    s[pi] = x = (x * rnd | 0) / rnd;\n    s[pi + 1] = y = (y * rnd | 0) / rnd;\n\n    if (anchor.smooth) {\n      if (_ALT) {\n        anchor.smooth = false;\n        anchor.element.setAttribute(\"d\", this._squareHandle);\n\n        this._handle1.setAttribute(\"d\", this._squareHandle);\n\n        this._handle2.setAttribute(\"d\", this._squareHandle);\n      } else {\n        angle = Math.atan2(s[i + 1] - y, s[i] - x);\n        x = this._oppositeHandleLength * Math.cos(angle);\n        y = this._oppositeHandleLength * Math.sin(angle);\n        s[i + 2] = ((s[i] + x) * rnd | 0) / rnd;\n        s[i + 3] = ((s[i + 1] + y) * rnd | 0) / rnd;\n      }\n    }\n\n    this.update();\n  };\n\n  _proto3._onDragHandle2 = function _onDragHandle2() {\n    var anchor = this._editingAnchor,\n        s = anchor.segment,\n        i = anchor.i,\n        pi = anchor.isClosedStart ? s.length - 4 : i - 2,\n        rnd = 1000,\n        x = this._handle2._draggable.x,\n        y = this._handle2._draggable.y,\n        angle;\n    s[i + 2] = x = (x * rnd | 0) / rnd;\n    s[i + 3] = y = (y * rnd | 0) / rnd;\n\n    if (anchor.smooth) {\n      if (_ALT) {\n        anchor.smooth = false;\n        anchor.element.setAttribute(\"d\", this._squareHandle);\n\n        this._handle1.setAttribute(\"d\", this._squareHandle);\n\n        this._handle2.setAttribute(\"d\", this._squareHandle);\n      } else {\n        angle = Math.atan2(s[i + 1] - y, s[i] - x);\n        x = this._oppositeHandleLength * Math.cos(angle);\n        y = this._oppositeHandleLength * Math.sin(angle);\n        s[pi] = ((s[i] + x) * rnd | 0) / rnd;\n        s[pi + 1] = ((s[i + 1] + y) * rnd | 0) / rnd;\n      }\n    }\n\n    this.update();\n  };\n\n  _proto3._onDragAnchor = function _onDragAnchor(anchor, changeX, changeY) {\n    var anchors = this._selectedAnchors,\n        l = anchors.length,\n        rnd = 1000,\n        i,\n        j,\n        s,\n        a,\n        pi;\n\n    for (j = 0; j < l; j++) {\n      a = anchors[j];\n      i = a.i;\n      s = a.segment;\n\n      if (i) {\n        s[i - 2] = ((s[i - 2] + changeX) * rnd | 0) / rnd;\n        s[i - 1] = ((s[i - 1] + changeY) * rnd | 0) / rnd;\n      } else if (a.isClosedStart) {\n        pi = s.length - 2;\n        s[pi] = _round(s[pi] + changeX);\n        s[pi + 1] = _round(s[pi + 1] + changeY);\n        s[pi - 2] = _round(s[pi - 2] + changeX);\n        s[pi - 1] = _round(s[pi - 1] + changeY);\n      }\n\n      s[i] = ((s[i] + changeX) * rnd | 0) / rnd;\n      s[i + 1] = ((s[i + 1] + changeY) * rnd | 0) / rnd;\n\n      if (i < s.length - 2) {\n        s[i + 2] = ((s[i + 2] + changeX) * rnd | 0) / rnd;\n        s[i + 3] = ((s[i + 3] + changeY) * rnd | 0) / rnd;\n      }\n\n      if (a !== anchor) {\n        a.element.setAttribute(\"transform\", \"translate(\" + s[i] + _comma + s[i + 1] + \")\");\n      }\n    }\n\n    this.update();\n  };\n\n  _proto3.enabled = function enabled(_enabled2) {\n    if (!arguments.length) {\n      return this._enabled;\n    }\n\n    var i = this._anchors.length;\n\n    while (--i > -1) {\n      this._anchors[i]._draggable.enabled(_enabled2);\n    }\n\n    this._enabled = _enabled2;\n\n    this._handle1._draggable.enabled(_enabled2);\n\n    this._handle2._draggable.enabled(_enabled2);\n\n    if (this._draggable) {\n      this._draggable.enabled(_enabled2);\n    }\n\n    if (!_enabled2) {\n      this.deselect();\n      this._selectionHittest.parentNode && this._selectionHittest.parentNode.removeChild(this._selectionHittest);\n      this._selection.parentNode && this._selection.parentNode.removeChild(this._selection);\n    } else if (!this._selection.parentNode) {\n      this.path.ownerSVGElement.appendChild(this._selectionHittest);\n      this.path.ownerSVGElement.appendChild(this._selection);\n      this.init();\n\n      this._saveState();\n    }\n\n    this._updateAnchors();\n\n    return this.update();\n  };\n\n  _proto3.update = function update(readPath) {\n    var d = \"\",\n        anchor = this._editingAnchor,\n        i,\n        s,\n        x,\n        y,\n        pi;\n\n    if (readPath) {\n      this.init();\n    }\n\n    if (anchor) {\n      i = anchor.i;\n      s = anchor.segment;\n\n      if (i || anchor.isClosedStart) {\n        pi = anchor.isClosedStart ? s.length - 4 : i - 2;\n        x = s[pi];\n        y = s[pi + 1];\n\n        this._handle1.setAttribute(\"transform\", \"translate(\" + x + _comma + y + \")\");\n\n        this._line1.setAttribute(\"points\", x + _comma + y + _comma + s[i] + _comma + s[i + 1]);\n      }\n\n      if (i < s.length - 2) {\n        x = s[i + 2];\n        y = s[i + 3];\n\n        this._handle2.setAttribute(\"transform\", \"translate(\" + x + _comma + y + \")\");\n\n        this._line2.setAttribute(\"points\", s[i] + _comma + s[i + 1] + _comma + x + _comma + y);\n      }\n    }\n\n    if (readPath) {\n      d = this.path.getAttribute(\"d\");\n    } else {\n      for (i = 0; i < this._rawPath.length; i++) {\n        s = this._rawPath[i];\n\n        if (s.length > 7) {\n          d += \"M\" + s[0] + _comma + s[1] + \"C\" + s.slice(2).join(_comma);\n        }\n      }\n\n      this.path.setAttribute(\"d\", d);\n\n      this._selectionPath.setAttribute(\"d\", d);\n\n      this._selectionHittest.setAttribute(\"d\", d);\n    }\n\n    if (this.vars.onUpdate && this._enabled) {\n      _callback(\"onUpdate\", this, d);\n    }\n\n    return this;\n  };\n\n  _proto3.getRawPath = function getRawPath(applyTransforms, offsetX, offsetY) {\n    if (applyTransforms) {\n      var m = _getConsolidatedMatrix(this.path);\n\n      return transformRawPath(copyRawPath(this._rawPath), 1, 0, 0, 1, m.e + (offsetX || 0), m.f + (offsetY || 0));\n    }\n\n    return this._rawPath;\n  };\n\n  _proto3.getString = function getString(applyTransforms, offsetX, offsetY) {\n    if (applyTransforms) {\n      var m = _getConsolidatedMatrix(this.path);\n\n      return rawPathToString(transformRawPath(copyRawPath(this._rawPath), 1, 0, 0, 1, m.e + (offsetX || 0), m.f + (offsetY || 0)));\n    }\n\n    return this.path.getAttribute(\"d\");\n  };\n\n  _proto3.getNormalizedSVG = function getNormalizedSVG(height, originY, shorten, onEaseError) {\n    var s = this._rawPath[0],\n        tx = s[0] * -1,\n        ty = originY === 0 ? 0 : -(originY || s[1]),\n        l = s.length,\n        sx = 1 / (s[l - 2] + tx),\n        sy = -height || s[l - 1] + ty,\n        rnd = 1000,\n        points,\n        i,\n        x1,\n        y1,\n        x2,\n        y2;\n    _temp.length = 0;\n\n    if (sy) {\n      //typically y ends at 1 (so that the end values are reached)\n      sy = 1 / sy;\n    } else {\n      //in case the ease returns to its beginning value, scale everything proportionally\n      sy = -sx;\n    }\n\n    sx *= rnd;\n    sy *= rnd;\n\n    for (i = 0; i < l; i += 2) {\n      _temp[i] = ((s[i] + tx) * sx | 0) / rnd;\n      _temp[i + 1] = ((s[i + 1] + ty) * sy | 0) / rnd;\n    }\n\n    if (onEaseError) {\n      points = [];\n      l = _temp.length;\n\n      for (i = 2; i < l; i += 6) {\n        x1 = _temp[i - 2];\n        y1 = _temp[i - 1];\n        x2 = _temp[i + 4];\n        y2 = _temp[i + 5];\n        points.push(x1, y1, x2, y2);\n        bezierToPoints(x1, y1, _temp[i], _temp[i + 1], _temp[i + 2], _temp[i + 3], x2, y2, 0.001, points, points.length - 2);\n      }\n\n      x1 = points[0];\n      l = points.length;\n\n      for (i = 2; i < l; i += 2) {\n        x2 = points[i];\n\n        if (x2 < x1 || x2 > 1 || x2 < 0) {\n          onEaseError();\n          break;\n        }\n\n        x1 = x2;\n      }\n    }\n\n    if (shorten && l === 8 && _temp[0] === 0 && _temp[1] === 0 && _temp[l - 2] === 1 && _temp[l - 1] === 1) {\n      return _temp.slice(2, 6).join(\",\");\n    }\n\n    _temp[2] = \"C\" + _temp[2];\n    return \"M\" + _temp.join(\",\");\n  };\n\n  _proto3.kill = function kill() {\n    this.enabled(false);\n    this._g.parentNode && this._g.parentNode.removeChild(this._g);\n  };\n\n  _proto3.revert = function revert() {\n    this.kill();\n  };\n\n  return PathEditor;\n}();\nPathEditor.simplifyPoints = simplifyPoints;\nPathEditor.pointsToSegment = pointsToSegment;\n\nPathEditor.simplifySVG = function (data, vars) {\n  //takes a <path> element or data string and simplifies it according to whatever tolerance you set (default:1, the bigger the number the more variance there can be). vars: {tolerance:1, cornerThreshold:degrees, curved:true}\n  var element, points, i, x1, x2, y1, y2, bezier, precision, tolerance, l, cornerThreshold;\n  vars = vars || {};\n  tolerance = vars.tolerance || 1;\n  precision = vars.precision || 1 / tolerance;\n  cornerThreshold = (vars.cornerThreshold === undefined ? 18 : +vars.cornerThreshold) * _DEG2RAD;\n\n  if (typeof data !== \"string\") {\n    //element\n    element = data;\n    data = element.getAttribute(\"d\");\n  }\n\n  if (data.charAt(0) === \"#\" || data.charAt(0) === \".\") {\n    //selector text\n    element = _doc.querySelector(data);\n\n    if (element) {\n      data = element.getAttribute(\"d\");\n    }\n  }\n\n  points = vars.curved === false && !/[achqstvz]/ig.test(data) ? data.match(_numbersExp) : stringToRawPath(data)[0];\n\n  if (vars.curved !== false) {\n    bezier = points;\n    points = [];\n    l = bezier.length;\n\n    for (i = 2; i < l; i += 6) {\n      x1 = +bezier[i - 2];\n      y1 = +bezier[i - 1];\n      x2 = +bezier[i + 4];\n      y2 = +bezier[i + 5];\n      points.push(_round(x1), _round(y1), _round(x2), _round(y2));\n      bezierToPoints(x1, y1, +bezier[i], +bezier[i + 1], +bezier[i + 2], +bezier[i + 3], x2, y2, 1 / (precision * 200000), points, points.length - 2);\n    }\n\n    points = pointsToSegment(simplifyPoints(points, tolerance), vars.curviness, cornerThreshold);\n    points[2] = \"C\" + points[2];\n  } else {\n    points = simplifyPoints(points, tolerance);\n  }\n\n  data = \"M\" + points.join(\",\");\n\n  if (element) {\n    element.setAttribute(\"d\", data);\n  }\n\n  return data;\n};\n\nPathEditor.create = function (target, vars) {\n  return new PathEditor(target, vars);\n};\n\nPathEditor.editingAxis = _editingAxis;\n\nPathEditor.getSnapFunction = function (vars) {\n  //{gridSize, radius, x, y, width, height}\n  var r = vars.radius || 2,\n      big = 1e20,\n      minX = vars.x || vars.x === 0 ? vars.x : vars.width ? 0 : -big,\n      minY = vars.y || vars.y === 0 ? vars.y : vars.height ? 0 : -big,\n      maxX = minX + (vars.width || big * big),\n      maxY = minY + (vars.height || big * big),\n      containX = vars.containX !== false,\n      containY = vars.containY !== false,\n      axis = vars.axis,\n      grid = vars.gridSize;\n  r *= r;\n  return function (p) {\n    var x = p.x,\n        y = p.y,\n        gridX,\n        gridY,\n        dx,\n        dy;\n\n    if (containX && x < minX || (dx = x - minX) * dx < r) {\n      x = minX;\n    } else if (containX && x > maxX || (dx = maxX - x) * dx < r) {\n      x = maxX;\n    }\n\n    if (containY && y < minY || (dy = y - minY) * dy < r) {\n      y = minY;\n    } else if (containY && y > maxY || (dy = maxY - y) * dy < r) {\n      y = maxY;\n    }\n\n    if (axis) {\n      dx = x - axis.x;\n      dy = y - axis.y;\n\n      if (dx * dx < r) {\n        x = axis.x;\n      }\n\n      if (dy * dy < r) {\n        y = axis.y;\n      }\n    }\n\n    if (grid) {\n      gridX = minX + Math.round((x - minX) / grid) * grid; //closest grid slot on x-axis\n\n      dx = gridX - x;\n      gridY = minY + Math.round((y - minY) / grid) * grid; //closest grid slot on y-axis\n\n      dy = gridY - y;\n\n      if (dx * dx + dy * dy < r) {\n        x = gridX;\n        y = gridY;\n      }\n    }\n\n    p.x = x;\n    p.y = y;\n  };\n};\n\nPathEditor.version = \"3.13.0\";\nPathEditor.register = _initCore;\nexport { PathEditor as default };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}